var e=(e,t,a)=>new Promise((s,r)=>{var l=e=>{try{d(a.next(e))}catch(t){r(t)}},i=e=>{try{d(a.throw(e))}catch(t){r(t)}},d=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,i);d((a=a.apply(e,t)).next())});import{c as t,g as a,b as s,F as r,m as l,e as i,q as d,v as n,s as o,r as c,o as g,n as x,t as u,J as m,K as p}from"./vendor-CkCPX7gN.js";import{e as y}from"./api-BVJ8Bwme.js";import{_ as v}from"./app-C0qg3RLk.js";import"./utils-BruBI8_W.js";const b={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},h={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},k={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},f={class:"flex justify-between items-center py-6"},w={class:"flex items-center space-x-4"},C=["disabled"],T={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},D={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},A={class:"flex space-x-8"},j=["onClick"],S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},U={key:0,class:"space-y-6"},M={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},_={class:"flex items-center"},F={class:"flex-shrink-0"},L={class:"ml-4"},R={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},P={class:"text-2xl font-semibold text-gray-900 dark:text-white"},$={class:"bg-white dark:bg-gray-800 rounded-lg shadow"},B={class:"p-6"},H={class:"space-y-4"},J={class:"flex-1 min-w-0"},V={class:"text-sm text-gray-900 dark:text-white"},q={class:"text-sm text-gray-500 dark:text-gray-400"},z={key:1,class:"space-y-6"},I={class:"bg-white dark:bg-gray-800 rounded-lg shadow"},K={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},E={class:"flex justify-between items-center"},G={class:"flex space-x-4"},N={class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"flex items-center"},Y={class:"flex-shrink-0 h-10 w-10"},Z={class:"h-10 w-10 rounded-full bg-primary-100 dark:bg-primary-900 flex items-center justify-center"},ee={class:"text-sm font-medium text-primary-600 dark:text-primary-400"},te={class:"ml-4"},ae={class:"text-sm font-medium text-gray-900 dark:text-white"},se={class:"text-sm text-gray-500 dark:text-gray-400"},re={class:"px-6 py-4 whitespace-nowrap"},le={class:"px-6 py-4 whitespace-nowrap"},ie={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},de={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ne=["value","onChange"],oe={key:2,class:"text-center py-12"},ce={key:3,class:"text-center py-12"},ge={key:4,class:"text-center py-12"},xe=v({name:"Admin",setup(){const t=c("dashboard"),a=c(!1),s=c([]),r=c([]),l=c({role:"all",status:"all",search:""}),i=c([{title:"Total Users",value:0,icon:"svg",bgColor:"bg-blue-500"},{title:"Total Cars",value:0,icon:"svg",bgColor:"bg-green-500"},{title:"Total Diagnoses",value:0,icon:"svg",bgColor:"bg-yellow-500"},{title:"Active Mechanics",value:0,icon:"svg",bgColor:"bg-purple-500"}]),d=()=>e(null,null,function*(){try{a.value=!0;const e=yield y.get("/admin/dashboard");if(e.data.success){const t=e.data.data;i.value=[{title:"Total Users",value:t.users.total,icon:"svg",bgColor:"bg-blue-500"},{title:"Total Cars",value:t.cars.total,icon:"svg",bgColor:"bg-green-500"},{title:"Total Diagnoses",value:t.diagnoses.total,icon:"svg",bgColor:"bg-yellow-500"},{title:"Active Mechanics",value:t.users.mechanics,icon:"svg",bgColor:"bg-purple-500"}]}}catch(e){}finally{a.value=!1}}),n=()=>e(null,null,function*(){try{const e=yield y.get("/admin/users",{params:l.value});e.data.success&&(s.value=e.data.data.data)}catch(e){}}),o=()=>e(null,null,function*(){try{const e=yield y.get("/admin/system-logs");e.data.success&&(r.value=e.data.data)}catch(e){}});return g(()=>{d(),o()}),{activeTab:t,isLoading:a,users:s,recentActivities:r,userFilters:l,tabs:[{id:"dashboard",name:"Dashboard"},{id:"users",name:"Users"},{id:"cars",name:"Cars"},{id:"diagnoses",name:"Diagnoses"},{id:"settings",name:"Settings"}],dashboardStats:i,loadUsers:n,updateUserStatus:(t,a)=>e(null,null,function*(){try{yield y.put(`/admin/users/${t}/status`,{status:a}),yield n()}catch(e){}}),refreshData:()=>{"dashboard"===t.value?(d(),o()):"users"===t.value&&n()},formatDate:e=>new Date(e).toLocaleDateString(),formatTime:e=>new Date(e).toLocaleString()}}},[["render",function(e,c,g,y,v,xe){return a(),t("div",b,[s("div",h,[s("div",k,[s("div",f,[c[4]||(c[4]=s("div",null,[s("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," Admin Panel "),s("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage system and view overview ")],-1)),s("div",w,[s("button",{onClick:c[0]||(c[0]=(...e)=>y.refreshData&&y.refreshData(...e)),class:"btn-secondary flex items-center space-x-2",disabled:y.isLoading},[...c[3]||(c[3]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),s("span",null,"Refresh",-1)])],8,C)])])])]),s("div",T,[s("div",D,[s("nav",A,[(a(!0),t(r,null,l(y.tabs,e=>(a(),t("button",{key:e.id,onClick:t=>y.activeTab=e.id,class:x(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200",y.activeTab===e.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},u(e.name),11,j))),128))])])]),s("div",S,["dashboard"===y.activeTab?(a(),t("div",U,[s("div",M,[(a(!0),t(r,null,l(y.dashboardStats,e=>(a(),t("div",{key:e.title,class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},[s("div",_,[s("div",F,[s("div",{class:x(["w-8 h-8 rounded-md flex items-center justify-center",e.bgColor])},[(a(),m(p(e.icon),{class:"w-5 h-5 text-white"}))],2)]),s("div",L,[s("p",R,u(e.title),1),s("p",P,u(e.value),1)])])]))),128))]),s("div",$,[c[6]||(c[6]=s("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Recent Activity ")],-1)),s("div",B,[s("div",H,[(a(!0),t(r,null,l(y.recentActivities,e=>(a(),t("div",{key:e.id,class:"flex items-center space-x-4"},[c[5]||(c[5]=s("div",{class:"flex-shrink-0"},[s("div",{class:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center"},[s("svg",{class:"w-4 h-4 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),s("div",J,[s("p",V,u(e.message),1),s("p",q,u(y.formatTime(e.timestamp)),1)])]))),128))])])])])):i("",!0),"users"===y.activeTab?(a(),t("div",z,[s("div",I,[s("div",K,[s("div",E,[c[8]||(c[8]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"}," Users Management ",-1)),s("div",G,[d(s("select",{"onUpdate:modelValue":c[1]||(c[1]=e=>y.userFilters.role=e),class:"input-sm"},[...c[7]||(c[7]=[s("option",{value:"all"},"All Roles",-1),s("option",{value:"customer"},"Customers",-1),s("option",{value:"mechanic"},"Mechanics",-1),s("option",{value:"admin"},"Admins",-1)])],512),[[n,y.userFilters.role]]),d(s("input",{"onUpdate:modelValue":c[2]||(c[2]=e=>y.userFilters.search=e),type:"text",placeholder:"Search users...",class:"input-sm"},null,512),[[o,y.userFilters.search]])])])]),s("div",N,[s("table",O,[c[10]||(c[10]=s("thead",{class:"bg-gray-50 dark:bg-gray-700"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," User "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Role "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Joined "),s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),s("tbody",Q,[(a(!0),t(r,null,l(y.users,r=>(a(),t("tr",{key:r.id},[s("td",W,[s("div",X,[s("div",Y,[s("div",Z,[s("span",ee,u(r.first_name?r.first_name[0]:r.name[0]),1)])]),s("div",te,[s("div",ae,u(r.first_name?`${r.first_name} ${r.last_name}`:r.name),1),s("div",se,u(r.email),1)])])]),s("td",re,[s("span",{class:x(["inline-flex px-2 py-1 text-xs font-semibold rounded-full","admin"===r.role?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"mechanic"===r.role?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"])},u(e.t(r.role)),3)]),s("td",le,[s("span",{class:x(["inline-flex px-2 py-1 text-xs font-semibold rounded-full","active"===r.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"])},u(e.t(r.status)),3)]),s("td",ie,u(y.formatDate(r.created_at)),1),s("td",de,[s("select",{value:r.status,onChange:e=>y.updateUserStatus(r.id,e.target.value),class:"input-sm"},[...c[9]||(c[9]=[s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"suspended"},"Suspended",-1)])],40,ne)])]))),128))])])])])])):i("",!0),"cars"===y.activeTab?(a(),t("div",oe,[...c[11]||(c[11]=[s("p",{class:"text-gray-500 dark:text-gray-400"},"Cars management coming soon",-1)])])):i("",!0),"diagnoses"===y.activeTab?(a(),t("div",ce,[...c[12]||(c[12]=[s("p",{class:"text-gray-500 dark:text-gray-400"},"Diagnoses management coming soon",-1)])])):i("",!0),"settings"===y.activeTab?(a(),t("div",ge,[...c[13]||(c[13]=[s("p",{class:"text-gray-500 dark:text-gray-400"},"System settings coming soon",-1)])])):i("",!0)])])}]]);export{xe as default};
