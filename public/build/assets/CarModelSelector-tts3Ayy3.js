var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,t=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,r=(e,a,l)=>new Promise((s,t)=>{var r=e=>{try{n(l.next(e))}catch(a){t(a)}},d=e=>{try{n(l.throw(e))}catch(a){t(a)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,d);n((l=l.apply(e,a)).next())});import{y as d,E as n,r as o,B as u,o as c,c as i,g as v,b as y,e as m,t as p,q as g,s as b,F as f,m as h,G as x,v as k,l as B}from"./vendor-DFhOdd_z.js";import{a as w}from"./utils-BruBI8_W.js";import{_ as P}from"./app-BKTvrWzY.js";const M=o([]),S=o([]),C=o(!1),_=o(null);const E={class:"space-y-4"},F={class:"space-y-2"},I=["for"],T={class:"relative"},H=["id","disabled","required"],j={value:""},q=["value"],L={key:0,class:"text-sm text-slate-500 dark:text-slate-400"},N={class:"space-y-2"},O=["for"],Y={class:"relative"},$=["id","disabled","required"],D={value:""},U=["value"],V={class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},A={key:0,class:"w-5 h-5 text-blue-500 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},G={key:1,class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},R={key:0,class:"text-sm text-slate-500 dark:text-slate-400"},z={key:1,class:"text-sm text-amber-600 dark:text-amber-400"},J={key:0,class:"space-y-2"},K=["for"],Q=["id","min","max","disabled","placeholder"],W={key:0,class:"text-sm text-slate-500 dark:text-slate-400"},X={key:1,class:"mt-4 p-4 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-600"},Z={class:"grid grid-cols-2 gap-4 text-sm"},ee={key:0},ae={class:"ml-2 text-slate-900 dark:text-slate-100"},le={key:1},se={class:"ml-2 text-slate-900 dark:text-slate-100"},te={key:2},re={class:"ml-2 text-slate-900 dark:text-slate-100"},de={key:3},ne={class:"ml-2 text-slate-900 dark:text-slate-100"},oe={key:0},ue={key:1},ce={key:4},ie={class:"ml-2 text-slate-900 dark:text-slate-100"},ve=P({__name:"CarModelSelector",props:{brand:{type:String,default:""},model:{type:String,default:""},year:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!0},showYear:{type:Boolean,default:!1},showDetails:{type:Boolean,default:!1},showHelp:{type:Boolean,default:!0},popularBrandsOnly:{type:Boolean,default:!1},brandLabel:{type:String,default:"Brand"},modelLabel:{type:String,default:"Model"},yearLabel:{type:String,default:"Year"},brandPlaceholder:{type:String,default:"Select Brand"},modelPlaceholder:{type:String,default:"Select Model"},yearPlaceholder:{type:String,default:"e.g., 2020"},brandHelpText:{type:String,default:"Please select a brand first"},modelHelpText:{type:String,default:"Please select a model"},yearHelpText:{type:String,default:"Optional: Enter the year of manufacture"},minYear:{type:Number,default:1900},maxYear:{type:Number,default:()=>(new Date).getFullYear()+1},brandId:{type:String,default:"car-brand"},modelId:{type:String,default:"car-model"},yearId:{type:String,default:"car-year"}},emits:["update:brand","update:model","update:year","change","brand-change","model-change","year-change"],setup(e,{emit:P}){const ve=e,ye=P,{carBrands:me,carModels:pe,isLoading:ge,loadCarBrands:be,loadCarModelsByBrandName:fe,getModelByName:he}=function(){const e=e=>r(null,null,function*(){var a,l;try{C.value=!0,_.value=null;const a=yield w.get(`/api/car-models/brand/${e}`);return a.data.success?(M.value=a.data.data,{success:!0,data:a.data.data,brand:a.data.brand}):{success:!1,message:"Failed to load car models"}}catch(s){return _.value=s.message,{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car models. Please try again."}}finally{C.value=!1}}),o=d(()=>S.value.length),u=d(()=>M.value.length),c=d(()=>S.value.filter(e=>e.is_popular)),i=d(()=>S.value.filter(e=>e.is_active)),v=d(()=>M.value.filter(e=>e.is_popular)),y=d(()=>M.value.filter(e=>e.is_active)),m=d(()=>{const e={};return M.value.forEach(a=>{a.body_type&&(e[a.body_type]||(e[a.body_type]=[]),e[a.body_type].push(a))}),e}),p=d(()=>{const e={};return M.value.forEach(a=>{a.segment&&(e[a.segment]||(e[a.segment]=[]),e[a.segment].push(a))}),e}),g=d(()=>{const e={};return M.value.forEach(a=>{if(a.brand){const l=a.brand.name;e[l]||(e[l]=[]),e[l].push(a)}}),e});return{carModels:n(M),carBrands:n(S),isLoading:n(C),error:n(_),totalBrands:o,totalModels:u,popularBrands:c,activeBrands:i,popularModels:v,activeModels:y,modelsByBodyType:m,modelsBySegment:p,modelsByBrand:g,loadCarBrands:(e=!1)=>r(null,null,function*(){var a,l;try{C.value=!0,_.value=null;const a=e?"/api/car-brands/popular":"/api/car-brands",l=yield w.get(a);return l.data.success?(S.value=l.data.data,{success:!0,data:l.data.data}):{success:!1,message:"Failed to load car brands"}}catch(s){return _.value=s.message,{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car brands. Please try again."}}finally{C.value=!1}}),loadCarModelsByBrand:e,loadCarModelsByBrandName:a=>r(null,null,function*(){var l,s;try{if(!a)return M.value=[],{success:!0,data:[]};const l=S.value.find(e=>e.name===a);return l?yield e(l.id):(M.value=[],{success:!1,message:"Brand not found"})}catch(t){return _.value=t.message,{success:!1,message:(null==(s=null==(l=t.response)?void 0:l.data)?void 0:s.message)||"Error loading car models. Please try again."}}}),loadCarModelsByBrandSlug:e=>r(null,null,function*(){var a,l;try{C.value=!0,_.value=null;const a=yield w.get(`/api/car-models/brand-slug/${e}`);return a.data.success?(M.value=a.data.data,{success:!0,data:a.data.data,brand:a.data.brand}):{success:!1,message:"Failed to load car models"}}catch(s){return _.value=s.message,{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car models. Please try again."}}finally{C.value=!1}}),searchCarModels:(e,...d)=>r(null,[e,...d],function*(e,r={}){var d,n;try{C.value=!0,_.value=null;const d=new URLSearchParams(((e,r)=>{for(var d in r||(r={}))l.call(r,d)&&t(e,d,r[d]);if(a)for(var d of a(r))s.call(r,d)&&t(e,d,r[d]);return e})({q:e},r)),n=yield w.get(`/api/car-models/search?${d}`);return n.data.success?{success:!0,data:n.data.data}:{success:!1,message:"Failed to search car models"}}catch(o){return _.value=o.message,{success:!1,message:(null==(n=null==(d=o.response)?void 0:d.data)?void 0:n.message)||"Error searching car models. Please try again."}}finally{C.value=!1}}),loadPopularCarModels:()=>r(null,null,function*(){var e,a;try{C.value=!0,_.value=null;const e=yield w.get("/api/car-models/popular");return e.data.success?{success:!0,data:e.data.data}:{success:!1,message:"Failed to load popular car models"}}catch(l){return _.value=l.message,{success:!1,message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Error loading popular car models. Please try again."}}finally{C.value=!1}}),loadCarModelsByBodyType:e=>r(null,null,function*(){var a,l;try{C.value=!0,_.value=null;const a=yield w.get(`/api/car-models/body-type/${e}`);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:"Failed to load car models by body type"}}catch(s){return _.value=s.message,{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car models. Please try again."}}finally{C.value=!1}}),loadCarModelsBySegment:e=>r(null,null,function*(){var a,l;try{C.value=!0,_.value=null;const a=yield w.get(`/api/car-models/segment/${e}`);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:"Failed to load car models by segment"}}catch(s){return _.value=s.message,{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car models. Please try again."}}finally{C.value=!1}}),loadCarModelsByFuelType:e=>r(null,null,function*(){var a,l;try{C.value=!0,_.value=null;const a=yield w.get(`/api/car-models/fuel-type/${e}`);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:"Failed to load car models by fuel type"}}catch(s){return _.value=s.message,{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car models. Please try again."}}finally{C.value=!1}}),loadBodyTypes:()=>r(null,null,function*(){var e,a;try{const e=yield w.get("/api/car-models/body-types");return e.data.success?{success:!0,data:e.data.data}:{success:!1,message:"Failed to load body types"}}catch(l){return{success:!1,message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Error loading body types. Please try again."}}}),loadSegments:()=>r(null,null,function*(){var e,a;try{const e=yield w.get("/api/car-models/segments");return e.data.success?{success:!0,data:e.data.data}:{success:!1,message:"Failed to load segments"}}catch(l){return{success:!1,message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Error loading segments. Please try again."}}}),loadFuelTypes:()=>r(null,null,function*(){var e,a;try{const e=yield w.get("/api/car-models/fuel-types");return e.data.success?{success:!0,data:e.data.data}:{success:!1,message:"Failed to load fuel types"}}catch(l){return{success:!1,message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Error loading fuel types. Please try again."}}}),getCarModelById:e=>r(null,null,function*(){var a,l;try{const a=yield w.get(`/api/car-models/${e}`);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:"Car model not found"}}catch(s){return{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car model. Please try again."}}}),getCarModelBySlug:e=>r(null,null,function*(){var a,l;try{const a=yield w.get(`/api/car-models/slug/${e}`);return a.data.success?{success:!0,data:a.data.data}:{success:!1,message:"Car model not found"}}catch(s){return{success:!1,message:(null==(l=null==(a=s.response)?void 0:a.data)?void 0:l.message)||"Error loading car model. Please try again."}}}),getBrandByName:e=>S.value.find(a=>a.name===e),getBrandById:e=>S.value.find(a=>a.id===e),getModelByName:e=>M.value.find(a=>a.name===e),getModelById:e=>M.value.find(a=>a.id===e),clearCarModels:()=>{M.value=[]},clearCarBrands:()=>{S.value=[]},clearAll:()=>{M.value=[],S.value=[],_.value=null}}}(),xe=o(ve.brand),ke=o(ve.model),Be=o(ve.year),we=d(()=>ke.value?he(ke.value):null),Pe=()=>r(null,null,function*(){ke.value="",Be.value="",ye("update:brand",xe.value),ye("brand-change",xe.value),ye("change",{brand:xe.value,model:ke.value,year:Be.value}),xe.value&&(yield fe(xe.value))}),Me=()=>{ye("update:model",ke.value),ye("model-change",ke.value),ye("change",{brand:xe.value,model:ke.value,year:Be.value})},Se=()=>{ye("update:year",Be.value),ye("year-change",Be.value),ye("change",{brand:xe.value,model:ke.value,year:Be.value})};return u(()=>ve.brand,e=>{xe.value=e}),u(()=>ve.model,e=>{ke.value=e}),u(()=>ve.year,e=>{Be.value=e}),c(()=>r(null,null,function*(){yield be(ve.popularBrandsOnly),xe.value&&(yield fe(xe.value))})),(a,l)=>(v(),i("div",E,[y("div",F,[y("label",{for:e.brandId,class:"block text-sm font-semibold text-slate-700 dark:text-slate-300"},p(e.brandLabel)+" * ",9,I),y("div",T,[g(y("select",{id:e.brandId,"onUpdate:modelValue":l[0]||(l[0]=e=>xe.value=e),disabled:e.disabled,required:e.required,class:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 appearance-none cursor-pointer",onChange:Pe},[y("option",j,p(e.brandPlaceholder),1),(v(!0),i(f,null,h(x(me),e=>(v(),i("option",{key:e.id,value:e.name},p(e.name),9,q))),128))],40,H),[[b,xe.value]]),l[3]||(l[3]=y("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[y("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),!xe.value&&e.showHelp?(v(),i("div",L,p(e.brandHelpText),1)):m("",!0)]),y("div",N,[y("label",{for:e.modelId,class:"block text-sm font-semibold text-slate-700 dark:text-slate-300"},p(e.modelLabel)+" * ",9,O),y("div",Y,[g(y("select",{id:e.modelId,"onUpdate:modelValue":l[1]||(l[1]=e=>ke.value=e),disabled:e.disabled||!xe.value||x(ge),required:e.required,class:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 appearance-none cursor-pointer",onChange:Me},[y("option",D,p(e.modelPlaceholder),1),(v(!0),i(f,null,h(x(pe),e=>(v(),i("option",{key:e.id,value:e.name},p(e.name),9,U))),128))],40,$),[[b,ke.value]]),y("div",V,[x(ge)?(v(),i("svg",A,[...l[4]||(l[4]=[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(v(),i("svg",G,[...l[5]||(l[5]=[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])]))])]),!xe.value&&e.showHelp?(v(),i("div",R,p(e.modelHelpText),1)):m("",!0),xe.value&&0===x(pe).length&&!x(ge)?(v(),i("div",z," No models found for "+p(xe.value),1)):m("",!0)]),e.showYear?(v(),i("div",J,[y("label",{for:e.yearId,class:"block text-sm font-semibold text-slate-700 dark:text-slate-300"},p(e.yearLabel),9,K),g(y("input",{id:e.yearId,"onUpdate:modelValue":l[2]||(l[2]=e=>Be.value=e),type:"number",min:e.minYear,max:e.maxYear,disabled:e.disabled,class:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:e.yearPlaceholder,onInput:Se},null,40,Q),[[k,Be.value]]),e.showHelp?(v(),i("div",W,p(e.yearHelpText),1)):m("",!0)])):m("",!0),e.showDetails&&we.value?(v(),i("div",X,[l[11]||(l[11]=y("h4",{class:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"},"Model Details",-1)),y("div",Z,[we.value.generation?(v(),i("div",ee,[l[6]||(l[6]=y("span",{class:"text-slate-500 dark:text-slate-400"},"Generation:",-1)),y("span",ae,p(we.value.generation),1)])):m("",!0),we.value.body_type?(v(),i("div",le,[l[7]||(l[7]=y("span",{class:"text-slate-500 dark:text-slate-400"},"Body Type:",-1)),y("span",se,p(we.value.body_type),1)])):m("",!0),we.value.segment?(v(),i("div",te,[l[8]||(l[8]=y("span",{class:"text-slate-500 dark:text-slate-400"},"Segment:",-1)),y("span",re,p(we.value.segment),1)])):m("",!0),we.value.start_year?(v(),i("div",de,[l[9]||(l[9]=y("span",{class:"text-slate-500 dark:text-slate-400"},"Production Years:",-1)),y("span",ne,[B(p(we.value.start_year)+" ",1),we.value.end_year?(v(),i("span",oe," - "+p(we.value.end_year),1)):(v(),i("span",ue," - Present"))])])):m("",!0),we.value.fuel_types&&we.value.fuel_types.length>0?(v(),i("div",ce,[l[10]||(l[10]=y("span",{class:"text-slate-500 dark:text-slate-400"},"Fuel Types:",-1)),y("span",ie,p(we.value.fuel_types.join(", ")),1)])):m("",!0)])])):m("",!0)]))}},[["__scopeId","data-v-e0d08ce5"]]);export{ve as C};
