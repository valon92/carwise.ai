var e=(e,t,s)=>new Promise((a,r)=>{var o=e=>{try{n(s.next(e))}catch(t){r(t)}},i=e=>{try{n(s.throw(e))}catch(t){r(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,i);n((s=s.apply(e,t)).next())});import{c as t,g as s,b as a,k as r,F as o,m as i,n,t as l,p as d,e as c,l as u,q as m,v as p,s as g,u as y,r as x,x as v,y as h,o as k,z as b,A as f,B as w,C}from"./vendor-CkCPX7gN.js";import{c as M,d as S}from"./api-CrWVQuGn.js";import{a as R}from"./utils-BruBI8_W.js";import{_ as T}from"./app-B4duU-Iu.js";const j={class:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-secondary-900 dark:to-secondary-800"},I={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},D={class:"mb-8"},P={class:"hidden md:flex items-center justify-center space-x-4"},F={key:0,class:"w-6 h-6 text-secondary-400 mx-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},B={class:"md:hidden"},z={class:"text-center mb-4"},A={class:"text-lg font-semibold text-secondary-900 dark:text-white"},L={class:"text-sm text-secondary-600 dark:text-secondary-400"},_={class:"w-full bg-secondary-200 dark:bg-secondary-700 rounded-full h-2 mb-4"},V={class:"flex justify-center space-x-2"},U={class:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8"},E={class:"bg-white dark:bg-secondary-800 rounded-2xl shadow-lg p-4 sm:p-6 lg:p-8 order-2 xl:order-1"},H={class:"space-y-6"},q={class:"space-y-4"},G={class:"flex items-center justify-between"},$={key:0,class:"flex items-center text-sm text-green-600 dark:text-green-400"},O={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},W=["disabled"],N=["value"],Y=["disabled"],J=["value"],Q={key:0,class:"text-sm text-secondary-500 dark:text-secondary-400 mt-1"},K=["max","disabled"],X=["disabled"],Z={class:"space-y-4"},ee={class:"flex items-center justify-between"},te={key:0,class:"flex items-center text-sm text-green-600 dark:text-green-400"},se={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ae=["disabled"],re=["disabled"],oe={class:"flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-1 mb-3 bg-secondary-100 dark:bg-secondary-700 rounded-lg p-1"},ie={key:0},ne={key:1,class:"space-y-4"},le={key:0,class:"p-4 bg-warning-50 dark:bg-warning-900/20 border border-warning-200 dark:border-warning-800 rounded-lg"},de={class:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4 p-6 bg-secondary-50 dark:bg-secondary-700 rounded-lg"},ce={key:0,class:"text-center"},ue={key:1},me={class:"text-xs text-gray-500 mb-2"},pe={class:"flex items-center space-x-4"},ge=["disabled"],ye={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xe={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve={key:2,class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},he={class:"text-center mt-2"},ke={class:"text-sm font-medium text-secondary-700 dark:text-secondary-300"},be={key:0},fe={key:1},we={key:2},Ce={key:0,class:"text-xs text-secondary-500 dark:text-secondary-500"},Me={key:1,class:"text-xs text-secondary-400 dark:text-secondary-500"},Se={class:"text-xs text-gray-400 mt-1"},Re={key:1,class:"p-4 bg-secondary-50 dark:bg-secondary-700 rounded-lg"},Te={class:"space-y-4"},je={class:"flex items-center space-x-4"},Ie=["src"],De={class:"text-sm text-secondary-600 dark:text-secondary-400"},Pe={class:"flex flex-wrap gap-2"},Fe=["disabled"],Be={key:0,class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={key:2,class:"p-4 bg-primary-50 dark:bg-primary-900/20 rounded-lg border border-primary-200 dark:border-primary-800"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Le=["value"],_e={class:"ml-2 text-sm text-secondary-700 dark:text-secondary-300"},Ve={key:0,class:"p-4 bg-danger-50 dark:bg-danger-900/20 border border-danger-200 dark:border-danger-800 rounded-lg"},Ue={class:"flex items-start space-x-3"},Ee={class:"mt-2 text-sm text-danger-700 dark:text-danger-300 list-disc list-inside space-y-1"},He={class:"flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-1 mb-4 bg-secondary-100 dark:bg-secondary-700 rounded-lg p-1"},qe={key:3,class:"mt-4"},Ge={class:"flex flex-wrap gap-2"},$e={key:0,class:"relative"},Oe=["src"],We={key:1,class:"relative"},Ne=["src"],Ye={key:2,class:"relative"},Je=["onClick"],Qe=["disabled"],Ke={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Xe={key:1,class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ze={class:"bg-white dark:bg-secondary-800 rounded-2xl shadow-lg p-4 sm:p-6 lg:p-8 order-1 xl:order-2"},et={key:0,class:"text-center py-12"},tt={key:1,class:"space-y-6"},st={class:"flex justify-between items-center mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},at={class:"text-sm text-yellow-800"},rt={class:"flex space-x-2"},ot={class:"bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-lg p-6"},it={class:"flex items-center justify-between mb-4"},nt={class:"flex items-center space-x-4"},lt={class:"flex items-center"},dt={class:"text-sm text-secondary-600 dark:text-secondary-400"},ct={class:"text-xl font-semibold text-secondary-900 dark:text-white mb-2"},ut={class:"text-secondary-700 dark:text-secondary-300 mb-4"},mt={key:0,class:"bg-white dark:bg-secondary-800 rounded-lg p-4 border border-primary-200 dark:border-primary-700 mb-4"},pt={class:"font-medium text-secondary-900 dark:text-white mb-2"},gt={class:"text-secondary-700 dark:text-secondary-300 mb-3"},yt={class:"flex items-center justify-between"},xt={class:"flex items-center space-x-4"},vt={class:"text-sm text-secondary-600 dark:text-secondary-400"},ht={key:0,class:"flex flex-wrap gap-1"},kt={key:1,class:"bg-white dark:bg-secondary-800 rounded-lg p-4 border border-blue-200 dark:border-blue-700 mb-4"},bt={class:"space-y-3"},ft={class:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded-full flex items-center justify-center text-sm font-medium"},wt={class:"flex-1"},Ct={class:"font-medium text-secondary-900 dark:text-white"},Mt={class:"text-sm text-secondary-600 dark:text-secondary-400"},St={key:2,class:"bg-white dark:bg-secondary-800 rounded-lg p-4 border border-orange-200 dark:border-orange-700 mb-4"},Rt={class:"space-y-3"},Tt={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},jt={key:1},It={class:"flex-1"},Dt={class:"font-medium text-secondary-900 dark:text-white"},Pt={class:"text-sm text-secondary-600 dark:text-secondary-400"},Ft={class:"flex items-center space-x-2 mt-1"},Bt={key:0,class:"text-xs px-2 py-1 bg-red-100 text-red-800 rounded-full"},zt={key:3,class:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400"},At={class:"text-sm text-blue-800 dark:text-blue-200 space-y-1"},Lt={class:"space-y-3"},_t={class:"w-6 h-6 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mr-3 mt-0.5"},Vt={class:"text-xs font-medium text-primary-600 dark:text-primary-400"},Ut={class:"font-medium text-secondary-900 dark:text-white"},Et={class:"text-sm text-secondary-600 dark:text-secondary-400"},Ht={class:"inline-block mt-1 px-2 py-1 text-xs font-medium bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400 rounded"},qt={class:"space-y-3"},Gt={class:"font-medium text-secondary-900 dark:text-white"},$t={class:"text-sm text-secondary-600 dark:text-secondary-400"},Ot={class:"inline-block mt-1 px-2 py-1 text-xs font-medium bg-success-100 dark:bg-success-900 text-success-600 dark:text-success-400 rounded"},Wt={key:0,class:"bg-warning-50 dark:bg-warning-900/20 rounded-lg p-6"},Nt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Yt={class:"text-secondary-700 dark:text-secondary-300 font-medium"},Jt={class:"font-semibold text-warning-700 dark:text-warning-300"},Qt={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-6"},Kt={key:2,class:"text-center py-12"},Xt=T({name:"Diagnose",setup(){const t=f(),s=w(),a=x(0),r=x(!1),o=x(null),i=x(null),n=x(null),l=x(null),d=x(null),c=x([]),u=x(null),m=x([]),p=x([]),g=x("photos"),y=x("text"),C=x(!1),T=x(!1),j=x(!1),I=x(null),D=x(""),P=x(0),F=x(null),B=x([]),z=x(null),A=x(!1),L=x(null),_=x(null),V=x(null),U=x([]),E=v({make:"",model:"",year:"",mileage:"",engineType:"",engineSize:"",description:"",symptoms:[],selectedCarId:null}),H=t=>e(null,null,function*(){try{if(!t)return void(p.value=[]);const e=m.value.find(e=>e.name===t);if(!e)return void(p.value=[]);const s=yield R.get(`/api/car-models/brand/${e.id}`);s.data.success&&(p.value=s.data.data)}catch(e){p.value=[]}}),q=e=>{e.forEach(e=>{const t=e.type;let s=5,a=10485760;if(t.startsWith("video/")?(s=2,a=52428800):t.startsWith("audio/")&&(s=3,a=20971520),e.size>a)alert(`File ${e.name} is too large. Maximum size is ${Math.round(a/1048576)}MB.`);else if(c.value.length>=s)alert(`Maximum ${s} files allowed.`);else if(t.startsWith("image/")||t.startsWith("video/")||t.startsWith("audio/")){const s=new FileReader;s.onload=s=>{c.value.push({file:e,preview:s.target.result,type:t.startsWith("image/")?"image":t.startsWith("video/")?"video":"audio"})},s.readAsDataURL(e)}})},G=()=>{F.value&&C.value&&!T.value&&(F.value.pause(),T.value=!0,clearInterval(z.value))},$=()=>{F.value&&C.value&&T.value&&(F.value.resume(),T.value=!1,O())},O=()=>{P.value=0,z.value=setInterval(()=>{P.value++},1e3)},W=()=>e(null,null,function*(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void(A.value=!1);if(navigator.permissions)try{const e=yield navigator.permissions.query({name:"microphone"});A.value="granted"===e.state,e.onchange=()=>{A.value="granted"===e.state}}catch(e){yield N()}else A.value=!1}catch(t){A.value=!1}}),N=()=>e(null,null,function*(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia is not supported in this browser");return(yield navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})).getTracks().forEach(e=>e.stop()),A.value=!0,!0}catch(e){return A.value=!1,!1}}),Y=()=>(U.value=[],E.make||U.value.push("Please select a car make"),E.model||U.value.push("Please select a car model"),E.year?(E.year<1990||E.year>(new Date).getFullYear()+1)&&U.value.push("Please enter a valid year (1990 - "+((new Date).getFullYear()+1)+")"):U.value.push("Please enter the car year"),E.description&&E.description.trim()||U.value.push("Please describe the problem or symptoms"),0===U.value.length),J=h(()=>"undefined"==typeof window?{cacheStatus:"Unknown",authStatus:"Unknown"}:{cacheStatus:localStorage.getItem("diagnosisCache")?"Cached":"Fresh",authStatus:localStorage.getItem("token")?"Logged In":"Not Logged In"});return k(()=>{e(null,null,function*(){try{const e=yield R.get("/api/car-brands/popular");e.data.success&&(m.value=e.data.data)}catch(e){}}),W();const s=localStorage.getItem("selectedCarForDiagnosis");if(s)try{const e=JSON.parse(s);E.make=e.brand,E.model=e.model,E.year=e.year,E.mileage=e.mileage,E.engineType=e.engine_type,E.engineSize=e.engine_size,E.selectedCarId=e.id,b(()=>{}),localStorage.removeItem("selectedCarForDiagnosis"),H(e.brand)}catch(o){}const a=t.query.car;a&&(t=>{e(null,null,function*(){var e;try{r.value=!0;const s=yield M.getById(t);s.data.success&&(u.value=s.data.car,E.make=u.value.brand,E.model=u.value.model,E.year=u.value.year.toString(),E.mileage=u.value.mileage?u.value.mileage.toString():"",E.engineType=u.value.fuel_type||"",E.engineSize=(null==(e=u.value.specifications)?void 0:e.engine_size)||"",H(u.value.brand))}catch(o){alert("Error loading car data. Please try again.")}finally{r.value=!1}})})(a)}),{currentStep:a,steps:["Vehicle Info","Symptoms","AI Analysis","Results"],diagnosisForm:E,commonSymptoms:["Engine won't start","Rough idle","Stalling","Poor acceleration","Strange noises","Warning lights on","Smoke from exhaust","Overheating","Poor fuel economy","Transmission issues","Brake problems","Steering issues","Electrical problems","AC not working","Suspension problems"],isLoading:r,diagnosisResult:o,fileInput:i,photoInput:n,videoInput:l,audioInput:d,uploadedFiles:c,selectedCar:u,carBrands:m,carModels:p,activeMediaType:g,activeInputType:y,isRecording:C,isProcessingAudio:j,recordedAudio:I,transcribedText:D,recordingTime:P,microphonePermissionGranted:A,formErrors:U,triggerFileUpload:(e="photos")=>{"photos"===e?n.value.click():"videos"===e?l.value.click():"audio"===e&&d.value.click()},handleFileSelect:e=>{const t=Array.from(e.target.files);q(t)},handleFileDrop:e=>{const t=Array.from(e.dataTransfer.files);q(t)},removeFile:e=>{c.value.splice(e,1)},toggleRecording:()=>e(null,null,function*(){C.value?T.value?$():G():e(null,null,function*(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia is not supported in this browser");if(!A.value&&!(yield N()))throw new Error("Microphone permission required. Please allow microphone access to record audio.");const e=yield navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}});F.value=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"}),B.value=[],F.value.ondataavailable=e=>{e.data.size>0&&B.value.push(e.data)},F.value.onstop=()=>{L.value=new Blob(B.value,{type:"audio/webm"}),_.value=URL.createObjectURL(L.value),I.value=_.value,e.getTracks().forEach(e=>e.stop())},F.value.start(1e3),C.value=!0,T.value=!1,V.value=Date.now(),A.value=!0,O()}catch(e){let t="Could not access microphone. ";"NotAllowedError"===e.name?t+="Please allow microphone access and try again.":"NotFoundError"===e.name?t+="No microphone found. Please connect a microphone and try again.":"NotSupportedError"===e.name?t+="Microphone access is not supported in this browser.":"NotReadableError"===e.name?t+="Microphone is being used by another application.":e.message.includes("permission denied")||e.message.includes("permission required")?(t+="Microphone permission required. Please allow microphone access when prompted by your browser.\n\n",t+='Chrome/Edge: Click the microphone icon in the address bar and select "Allow"\n',t+='Firefox: Click "Allow" when the permission dialog appears\n',t+="Safari: Go to Safari > Preferences > Websites > Microphone and allow access"):t+="Please check your microphone permissions and try again.",alert(t)}})}),stopRecording:()=>{F.value&&C.value&&(F.value.stop(),C.value=!1,T.value=!1,clearInterval(z.value),P.value=0)},pauseRecording:G,resumeRecording:$,clearRecording:()=>{I.value=null,D.value="",P.value=0,L.value=null,_.value&&(URL.revokeObjectURL(_.value),_.value=null),F.value&&"inactive"!==F.value.state&&F.value.stop(),C.value=!1,T.value=!1,clearInterval(z.value)},transcribeAudio:()=>e(null,null,function*(){if(L.value){j.value=!0;try{const e=new FormData;e.append("audio",L.value,"recording.webm");const t=yield R.post("/api/transcribe-audio",e,{headers:{"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error(t.data.message||"Transcription failed");D.value=t.data.text,E.description=D.value}catch(e){D.value="Transcription failed. Please try typing your description instead.",alert("Error transcribing audio. Please try again or type your description manually.")}finally{j.value=!1}}}),useTranscribedText:()=>{E.description=D.value,y.value="text"},formatTime:e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},isPaused:T,audioBlob:L,audioUrl:_,checkMicrophonePermission:W,requestMicrophonePermission:N,refreshMicrophonePermission:()=>e(null,null,function*(){yield W()}),validateForm:Y,submitDiagnosis:()=>e(null,null,function*(){var e,t;if(r.value)return;if(!Y())return alert("Please fill in all required fields:\n"+U.value.join("\n")),void window.scrollTo({top:0,behavior:"smooth"});const i=localStorage.getItem("token"),n=localStorage.getItem("user");o.value=null,a.value=0,localStorage.removeItem("lastDiagnosisResult"),localStorage.removeItem("lastDiagnosisSession"),localStorage.removeItem("diagnosisCache"),sessionStorage.removeItem("diagnosisCache"),i&&localStorage.setItem("token",i),n&&localStorage.setItem("user",n),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{(e.includes("diagnosis")||e.includes("carwise"))&&caches.delete(e)})});const l=localStorage.getItem("token");if(localStorage.getItem("user"),!l)return alert("You must be logged in to submit diagnosis!"),void s.push("/login");r.value=!0,a.value=2;try{const s=new FormData;s.append("make",E.make),s.append("model",E.model),s.append("year",E.year),s.append("mileage",E.mileage),s.append("engine_type",E.engineType),s.append("engine_size",E.engineSize),s.append("description",E.description),E.symptoms.forEach((e,t)=>{s.append(`symptoms[${t}]`,e)}),c.value.forEach((e,t)=>{s.append(`photos[${t}]`,e.file)});const i={make:E.make,model:E.model,year:E.year,mileage:E.mileage,engine_type:E.engineType,engine_size:E.engineSize,description:E.description,symptoms:E.symptoms||[],car_id:E.selectedCarId||null},n=yield S.startDiagnosis(i);try{const s=null==(e=n.data.data)?void 0:e.session_id,i=null==(t=(yield S.getResult(s)).data.data)?void 0:t.result;o.value=i,a.value=3,r.value=!1,window.$notify&&window.$notify.success("Diagnosis Complete","AI analysis has been completed successfully")}catch(d){r.value=!1,window.$notify&&window.$notify.error("Error","Failed to get diagnosis result. Please try again."),a.value=1}}catch(u){r.value=!1,a.value=1,window.$notify&&window.$notify.error("Error","Failed to submit diagnosis. Please try again.")}}),getSeverityColor:e=>{switch(e.toLowerCase()){case"low":return"bg-success-500";case"medium":return"bg-warning-500";case"high":return"bg-danger-500";default:return"bg-secondary-500"}},getSeverityTextColor:e=>{switch(e.toLowerCase()){case"low":return"text-success-600 dark:text-success-400";case"medium":return"text-warning-600 dark:text-warning-400";case"high":return"text-danger-600 dark:text-danger-400";default:return"text-secondary-600 dark:text-secondary-400"}},getSeverityText:e=>({low:"Low Priority",medium:"Medium Priority",high:"High Priority",critical:"Critical Priority"}[null==e?void 0:e.toLowerCase()]||"Medium Priority"),refreshResults:()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");localStorage.removeItem("lastDiagnosisResult"),localStorage.removeItem("lastDiagnosisSession"),localStorage.removeItem("diagnosisCache"),sessionStorage.removeItem("diagnosisCache"),e&&localStorage.setItem("token",e),t&&localStorage.setItem("user",t),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{(e.includes("diagnosis")||e.includes("carwise"))&&caches.delete(e)})}),o.value=null,window.location.href=window.location.href.split("?")[0]+"?t="+Date.now()},forceRefreshResults:()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");o.value=null,a.value=0,r.value=!1,localStorage.clear(),sessionStorage.clear(),e&&localStorage.setItem("token",e),t&&localStorage.setItem("user",t),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})}),"indexedDB"in window&&indexedDB.databases().then(e=>{e.forEach(e=>{indexedDB.deleteDatabase(e.name)})});const s=new URL(window.location);s.searchParams.set("_t",Date.now()),s.searchParams.set("_r",Math.random()),window.location.href=s.toString()},quickLogin:()=>e(null,null,function*(){try{const e=yield fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:"test@example.com",password:"password",remember:!0})}),t=yield e.json();t.success?(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),alert("Login successful! You can now submit diagnosis."),window.location.reload()):alert("Login failed: "+t.message)}catch(e){alert("Login error: "+e.message)}}),onMakeChange:()=>{E.model="",H(E.make)},debugInfo:J}}},[["render",function(e,x,v,h,k,b){var f;return s(),t("div",j,[a("div",I,[x[98]||(x[98]=r('<div class="text-center mb-12"><div class="inline-flex items-center justify-center w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-full mb-6"><svg class="w-8 h-8 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><h1 class="text-4xl font-bold text-secondary-900 dark:text-white mb-4"> AI-Powered Car Diagnosis </h1><p class="text-xl text-secondary-600 dark:text-secondary-400 max-w-3xl mx-auto"> Get instant, accurate diagnosis for your vehicle </p></div>',1)),a("div",D,[a("div",P,[(s(!0),t(o,null,i(h.steps,(e,r)=>(s(),t("div",{key:r,class:"flex items-center"},[a("div",{class:n(["w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-300",h.currentStep>=r?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-secondary-600 dark:text-secondary-400"])},l(r+1),3),a("span",{class:n(["ml-2 text-sm font-medium transition-colors duration-300",h.currentStep>=r?"text-primary-600 dark:text-primary-400":"text-secondary-600 dark:text-secondary-400"])},l(e),3),r<h.steps.length-1?(s(),t("svg",F,[...x[37]||(x[37]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])])):c("",!0)]))),128))]),a("div",B,[a("div",z,[a("div",{class:n(["inline-flex items-center justify-center w-12 h-12 rounded-full mb-2",h.currentStep>=0?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-secondary-600 dark:text-secondary-400"])},l(h.currentStep+1),3),a("h3",A,l(h.steps[h.currentStep]),1),a("p",L," Step "+l(h.currentStep+1)+" of "+l(h.steps.length),1)]),a("div",_,[a("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-500 ease-out",style:d({width:(h.currentStep+1)/h.steps.length*100+"%"})},null,4)]),a("div",V,[(s(!0),t(o,null,i(h.steps,(e,a)=>(s(),t("div",{key:a,class:n(["w-2 h-2 rounded-full transition-all duration-300",h.currentStep>=a?"bg-primary-600":"bg-secondary-300 dark:bg-secondary-600"])},null,2))),128))])])]),a("div",U,[a("div",E,[x[80]||(x[80]=a("h2",{class:"text-2xl font-semibold text-secondary-900 dark:text-white mb-6"}," Vehicle Information & Symptoms ",-1)),a("div",H,[a("div",q,[a("div",G,[x[39]||(x[39]=a("h3",{class:"text-lg font-medium text-secondary-900 dark:text-white"},"Vehicle Details",-1)),h.selectedCar?(s(),t("div",$,[...x[38]||(x[38]=[a("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),u(" Pre-filled from your car profile ",-1)])])):c("",!0)]),a("div",O,[a("div",null,[x[41]||(x[41]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Make * ",-1)),m(a("select",{"onUpdate:modelValue":x[0]||(x[0]=e=>h.diagnosisForm.make=e),class:"input",disabled:h.selectedCar,required:"",onChange:x[1]||(x[1]=(...e)=>h.onMakeChange&&h.onMakeChange(...e))},[x[40]||(x[40]=a("option",{value:""},"Select Make",-1)),(s(!0),t(o,null,i(h.carBrands,e=>(s(),t("option",{key:e.id,value:e.name},l(e.name),9,N))),128))],40,W),[[p,h.diagnosisForm.make]])]),a("div",null,[x[43]||(x[43]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Model * ",-1)),m(a("select",{"onUpdate:modelValue":x[2]||(x[2]=e=>h.diagnosisForm.model=e),class:"input",disabled:h.selectedCar||!h.diagnosisForm.make,required:""},[x[42]||(x[42]=a("option",{value:""},"Select Model",-1)),(s(!0),t(o,null,i(h.carModels,e=>(s(),t("option",{key:e.id,value:e.name},l(e.name),9,J))),128))],8,Y),[[p,h.diagnosisForm.model]]),h.diagnosisForm.make?c("",!0):(s(),t("div",Q," Please select make first "))]),a("div",null,[x[44]||(x[44]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Year * ",-1)),m(a("input",{"onUpdate:modelValue":x[3]||(x[3]=e=>h.diagnosisForm.year=e),type:"number",placeholder:"e.g., 2020",min:"1990",max:(new Date).getFullYear()+1,class:"input",disabled:h.selectedCar,required:""},null,8,K),[[g,h.diagnosisForm.year]])]),a("div",null,[x[45]||(x[45]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Mileage ",-1)),m(a("input",{"onUpdate:modelValue":x[4]||(x[4]=e=>h.diagnosisForm.mileage=e),type:"number",placeholder:"e.g., 50000",class:"input",disabled:h.selectedCar},null,8,X),[[g,h.diagnosisForm.mileage]])])])]),a("div",Z,[a("div",ee,[x[47]||(x[47]=a("h3",{class:"text-lg font-medium text-secondary-900 dark:text-white"},"Engine Details",-1)),h.selectedCar?(s(),t("div",te,[...x[46]||(x[46]=[a("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),u(" Pre-filled from your car ",-1)])])):c("",!0)]),a("div",se,[a("div",null,[x[49]||(x[49]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Engine Type ",-1)),m(a("select",{"onUpdate:modelValue":x[5]||(x[5]=e=>h.diagnosisForm.engineType=e),class:"input",disabled:h.selectedCar},[...x[48]||(x[48]=[r('<option value="">Select Engine Type</option><option value="Gasoline">Gasoline</option><option value="Diesel">Diesel</option><option value="Hybrid">Hybrid</option><option value="Electric">Electric</option><option value="Other">Other</option>',6)])],8,ae),[[p,h.diagnosisForm.engineType]])]),a("div",null,[x[50]||(x[50]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Engine Size ",-1)),m(a("input",{"onUpdate:modelValue":x[6]||(x[6]=e=>h.diagnosisForm.engineSize=e),type:"text",placeholder:"e.g., 2.0L, 3.5L",class:"input",disabled:h.selectedCar},null,8,re),[[g,h.diagnosisForm.engineSize]])])])]),a("div",null,[x[64]||(x[64]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Problem Description * ",-1)),a("div",oe,[a("button",{type:"button",onClick:x[7]||(x[7]=e=>h.activeInputType="text"),class:n(["flex-1 py-2 px-3 text-sm font-medium rounded-md transition-all duration-200","text"===h.activeInputType?"bg-white dark:bg-secondary-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-secondary-200"])},[...x[51]||(x[51]=[a("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),u(" Text ",-1)])],2),a("button",{type:"button",onClick:x[8]||(x[8]=e=>h.activeInputType="voice"),class:n(["flex-1 py-2 px-3 text-sm font-medium rounded-md transition-all duration-200","voice"===h.activeInputType?"bg-white dark:bg-secondary-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-secondary-200"])},[...x[52]||(x[52]=[a("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})],-1),u(" Voice ",-1)])],2)]),"text"===h.activeInputType?(s(),t("div",ie,[m(a("textarea",{"onUpdate:modelValue":x[9]||(x[9]=e=>h.diagnosisForm.description=e),rows:"4",placeholder:"Describe the symptoms or issues you're experiencing...",class:"input",required:""},null,512),[[g,h.diagnosisForm.description]])])):c("",!0),"voice"===h.activeInputType?(s(),t("div",ne,[h.microphonePermissionGranted?c("",!0):(s(),t("div",le,[...x[53]||(x[53]=[r('<div class="flex items-start space-x-3"><svg class="w-5 h-5 text-warning-600 dark:text-warning-400 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h4 class="text-sm font-medium text-warning-800 dark:text-warning-200">Microphone Permission Required</h4><p class="text-sm text-warning-700 dark:text-warning-300 mt-1"> To record audio, please allow microphone access when prompted by your browser. </p><div class="mt-2 text-xs text-warning-600 dark:text-warning-400"><p><strong>Chrome/Edge:</strong> Click the microphone icon in the address bar and select &quot;Allow&quot;</p><p><strong>Firefox:</strong> Click &quot;Allow&quot; when the permission dialog appears</p><p><strong>Safari:</strong> Go to Safari &gt; Preferences &gt; Websites &gt; Microphone and allow access</p></div></div></div>',1)])])),a("div",de,[h.microphonePermissionGranted?(s(),t("div",ue,[a("div",me," Debug: microphonePermissionGranted="+l(h.microphonePermissionGranted)+", isRecording="+l(h.isRecording)+", isPaused="+l(h.isPaused),1),a("div",pe,[a("button",{type:"button",onClick:x[11]||(x[11]=(...e)=>h.toggleRecording&&h.toggleRecording(...e)),disabled:h.isProcessingAudio,class:n(["flex items-center justify-center w-16 h-16 rounded-full transition-all duration-200 border-2 border-white shadow-lg",h.isRecording?h.isPaused?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-red-500 hover:bg-red-600 text-white animate-pulse":"bg-blue-500 hover:bg-blue-600 text-white"]),style:{"z-index":"10",position:"relative"}},[h.isRecording?h.isPaused?(s(),t("svg",xe,[...x[57]||(x[57]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2v-8a2 2 0 012-2z"},null,-1)])])):(s(),t("svg",ve,[...x[58]||(x[58]=[a("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"},null,-1)])])):(s(),t("svg",ye,[...x[56]||(x[56]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"},null,-1)])]))],10,ge),h.isRecording?(s(),t("button",{key:0,type:"button",onClick:x[12]||(x[12]=(...e)=>h.stopRecording&&h.stopRecording(...e)),class:"flex items-center justify-center w-12 h-12 rounded-full bg-red-500 hover:bg-red-600 text-white transition-all duration-200 border-2 border-white shadow-lg",style:{"z-index":"10",position:"relative"}},[...x[59]||(x[59]=[a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 10h6v4H9z"})],-1)])])):c("",!0)]),a("div",he,[a("p",ke,[h.isRecording?h.isPaused?(s(),t("span",fe,"Recording paused")):(s(),t("span",we,"Recording...")):(s(),t("span",be,"Click to record"))]),h.recordingTime>0?(s(),t("p",Ce,l(h.formatTime(h.recordingTime)),1)):c("",!0),h.isRecording||h.recordedAudio?c("",!0):(s(),t("p",Me," Speak clearly into your microphone ")),a("p",Se," Debug: isRecording="+l(h.isRecording)+", isPaused="+l(h.isPaused)+", recordingTime="+l(h.recordingTime),1)])])):(s(),t("div",ce,[a("button",{type:"button",onClick:x[10]||(x[10]=(...e)=>h.requestMicrophonePermission&&h.requestMicrophonePermission(...e)),class:"btn-primary mb-2"},[...x[54]||(x[54]=[a("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})],-1),u(" Allow Microphone Access ",-1)])]),x[55]||(x[55]=a("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"}," Click to enable microphone for voice recording ",-1))]))]),h.recordedAudio?(s(),t("div",Re,[a("div",Te,[a("div",je,[a("audio",{src:h.recordedAudio,controls:"",class:"flex-1"},null,8,Ie)]),a("div",De,[a("p",null,"Recording duration: "+l(h.formatTime(h.recordingTime)),1),a("p",null,"File size: "+l(h.audioBlob?(h.audioBlob.size/1024).toFixed(1)+" KB":"Unknown"),1)]),a("div",Pe,[a("button",{type:"button",onClick:x[13]||(x[13]=(...e)=>h.transcribeAudio&&h.transcribeAudio(...e)),disabled:h.isProcessingAudio,class:"btn-primary text-sm flex items-center"},[h.isProcessingAudio?c("",!0):(s(),t("svg",Be,[...x[60]||(x[60]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1)])])),u(" "+l(h.isProcessingAudio?"Transcribing...":"Convert to Text"),1)],8,Fe),h.transcribedText?(s(),t("button",{key:0,type:"button",onClick:x[14]||(x[14]=(...e)=>h.useTranscribedText&&h.useTranscribedText(...e)),class:"btn-secondary text-sm flex items-center"},[...x[61]||(x[61]=[a("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),u(" Use Text ",-1)])])):c("",!0),a("button",{type:"button",onClick:x[15]||(x[15]=(...e)=>h.clearRecording&&h.clearRecording(...e)),class:"btn-danger text-sm flex items-center"},[...x[62]||(x[62]=[a("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),u(" Clear ",-1)])])])])])):c("",!0),h.transcribedText?(s(),t("div",ze,[x[63]||(x[63]=a("label",{class:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2"}," Transcribed Text: ",-1)),m(a("textarea",{"onUpdate:modelValue":x[16]||(x[16]=e=>h.transcribedText=e),rows:"3",class:"input text-sm",placeholder:"Transcribed text will appear here..."},null,512),[[g,h.transcribedText]]),a("button",{type:"button",onClick:x[17]||(x[17]=(...e)=>h.useTranscribedText&&h.useTranscribedText(...e)),class:"mt-2 btn-primary text-sm"}," Use This Text ")])):c("",!0)])):c("",!0)]),a("div",null,[x[65]||(x[65]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3"}," Common Symptoms (Select All That Apply) ",-1)),a("div",Ae,[(s(!0),t(o,null,i(h.commonSymptoms,e=>(s(),t("label",{key:e,class:"flex items-center"},[m(a("input",{"onUpdate:modelValue":x[18]||(x[18]=e=>h.diagnosisForm.symptoms=e),type:"checkbox",value:e,class:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"},null,8,Le),[[C,h.diagnosisForm.symptoms]]),a("span",_e,l(e),1)]))),128))])]),h.formErrors.length>0?(s(),t("div",Ve,[a("div",Ue,[x[67]||(x[67]=a("svg",{class:"w-5 h-5 text-danger-600 dark:text-danger-400 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),a("div",null,[x[66]||(x[66]=a("h4",{class:"text-sm font-medium text-danger-800 dark:text-danger-200"},"Please fix the following errors:",-1)),a("ul",Ee,[(s(!0),t(o,null,i(h.formErrors,e=>(s(),t("li",{key:e},l(e),1))),128))])])])])):c("",!0),a("div",null,[x[77]||(x[77]=a("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Upload Media (Optional) ",-1)),a("div",He,[a("button",{type:"button",onClick:x[19]||(x[19]=e=>h.activeMediaType="photos"),class:n(["flex-1 py-2 px-3 text-sm font-medium rounded-md transition-all duration-200","photos"===h.activeMediaType?"bg-white dark:bg-secondary-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-secondary-200"])},[...x[68]||(x[68]=[a("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),u(" Photos ",-1)])],2),a("button",{type:"button",onClick:x[20]||(x[20]=e=>h.activeMediaType="videos"),class:n(["flex-1 py-2 px-3 text-sm font-medium rounded-md transition-all duration-200","videos"===h.activeMediaType?"bg-white dark:bg-secondary-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-secondary-200"])},[...x[69]||(x[69]=[a("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),u(" Videos ",-1)])],2),a("button",{type:"button",onClick:x[21]||(x[21]=e=>h.activeMediaType="audio"),class:n(["flex-1 py-2 px-3 text-sm font-medium rounded-md transition-all duration-200","audio"===h.activeMediaType?"bg-white dark:bg-secondary-800 text-primary-600 dark:text-primary-400 shadow-sm":"text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-secondary-200"])},[...x[70]||(x[70]=[a("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})],-1),u(" Audio ",-1)])],2)]),"photos"===h.activeMediaType?(s(),t("div",{key:0,onClick:x[22]||(x[22]=e=>h.triggerFileUpload("photos")),onDragover:x[23]||(x[23]=y(()=>{},["prevent"])),onDrop:x[24]||(x[24]=y((...e)=>h.handleFileDrop&&h.handleFileDrop(...e),["prevent"])),class:"border-2 border-dashed border-secondary-300 dark:border-secondary-600 rounded-lg p-6 text-center cursor-pointer hover:border-primary-400 transition-colors duration-200"},[...x[71]||(x[71]=[a("svg",{class:"mx-auto h-12 w-12 text-secondary-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[a("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),a("p",{class:"mt-2 text-sm text-secondary-600 dark:text-secondary-400"}," Drag & drop photos here ",-1),a("p",{class:"text-xs text-secondary-500 dark:text-secondary-500 mt-1"}," Max 5 photos, 10MB each ",-1)])],32)):c("",!0),"videos"===h.activeMediaType?(s(),t("div",{key:1,onClick:x[25]||(x[25]=e=>h.triggerFileUpload("videos")),onDragover:x[26]||(x[26]=y(()=>{},["prevent"])),onDrop:x[27]||(x[27]=y((...e)=>h.handleFileDrop&&h.handleFileDrop(...e),["prevent"])),class:"border-2 border-dashed border-secondary-300 dark:border-secondary-600 rounded-lg p-6 text-center cursor-pointer hover:border-primary-400 transition-colors duration-200"},[...x[72]||(x[72]=[a("svg",{class:"mx-auto h-12 w-12 text-secondary-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[a("path",{d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),a("p",{class:"mt-2 text-sm text-secondary-600 dark:text-secondary-400"}," Drag & drop videos here ",-1),a("p",{class:"text-xs text-secondary-500 dark:text-secondary-500 mt-1"}," Max 2 videos, 50MB each ",-1)])],32)):c("",!0),"audio"===h.activeMediaType?(s(),t("div",{key:2,onClick:x[28]||(x[28]=e=>h.triggerFileUpload("audio")),onDragover:x[29]||(x[29]=y(()=>{},["prevent"])),onDrop:x[30]||(x[30]=y((...e)=>h.handleFileDrop&&h.handleFileDrop(...e),["prevent"])),class:"border-2 border-dashed border-secondary-300 dark:border-secondary-600 rounded-lg p-6 text-center cursor-pointer hover:border-primary-400 transition-colors duration-200"},[...x[73]||(x[73]=[a("svg",{class:"mx-auto h-12 w-12 text-secondary-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[a("path",{d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),a("p",{class:"mt-2 text-sm text-secondary-600 dark:text-secondary-400"}," Drag & drop audio here ",-1),a("p",{class:"text-xs text-secondary-500 dark:text-secondary-500 mt-1"}," Max 3 audio files, 20MB each ",-1)])],32)):c("",!0),a("input",{ref:"photoInput",type:"file",multiple:"",accept:"image/*",onChange:x[31]||(x[31]=(...e)=>h.handleFileSelect&&h.handleFileSelect(...e)),class:"hidden"},null,544),a("input",{ref:"videoInput",type:"file",multiple:"",accept:"video/*",onChange:x[32]||(x[32]=(...e)=>h.handleFileSelect&&h.handleFileSelect(...e)),class:"hidden"},null,544),a("input",{ref:"audioInput",type:"file",multiple:"",accept:"audio/*",onChange:x[33]||(x[33]=(...e)=>h.handleFileSelect&&h.handleFileSelect(...e)),class:"hidden"},null,544),h.uploadedFiles.length>0?(s(),t("div",qe,[a("div",Ge,[(s(!0),t(o,null,i(h.uploadedFiles,(e,o)=>(s(),t("div",{key:o,class:"relative"},["image"===e.type?(s(),t("div",$e,[a("img",{src:e.preview,class:"w-20 h-20 object-cover rounded-lg"},null,8,Oe),x[74]||(x[74]=a("div",{class:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded"},[a("svg",{class:"w-3 h-3 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),u(" IMG ")],-1))])):"video"===e.type?(s(),t("div",We,[a("video",{src:e.preview,class:"w-20 h-20 object-cover rounded-lg",muted:""}," Your browser does not support video preview. ",8,Ne),x[75]||(x[75]=r('<div class="absolute inset-0 flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></div><div class="absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded"><svg class="w-3 h-3 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> VID </div>',2))])):"audio"===e.type?(s(),t("div",Ye,[...x[76]||(x[76]=[r('<div class="w-20 h-20 bg-secondary-100 dark:bg-secondary-700 rounded-lg flex items-center justify-center"><svg class="w-8 h-8 text-secondary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg></div><div class="absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-1 rounded"><svg class="w-3 h-3 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg> AUD </div>',2)])])):c("",!0),a("button",{onClick:e=>h.removeFile(o),class:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200"}," × ",8,Je)]))),128))])])):c("",!0)]),a("button",{type:"button",disabled:h.isLoading,onClick:x[34]||(x[34]=(...e)=>h.submitDiagnosis&&h.submitDiagnosis(...e)),class:"btn-primary w-full flex items-center justify-center py-4 text-lg font-semibold"},[h.isLoading?(s(),t("svg",Ke,[...x[78]||(x[78]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),t("svg",Xe,[...x[79]||(x[79]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},null,-1)])])),u(" "+l(h.isLoading?"Analyzing...":"Start AI Diagnosis"),1)],8,Qe)])]),a("div",Ze,[x[97]||(x[97]=a("h2",{class:"text-2xl font-semibold text-secondary-900 dark:text-white mb-6"}," Diagnosis Results ",-1)),h.isLoading?(s(),t("div",et,[...x[81]||(x[81]=[r('<div class="inline-flex items-center justify-center w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-full mb-4"><svg class="animate-spin w-8 h-8 text-primary-600 dark:text-primary-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><h3 class="text-lg font-medium text-secondary-900 dark:text-white mb-2">AI Analysis in Progress</h3><p class="text-secondary-600 dark:text-secondary-400 mb-4"> Our AI is analyzing your vehicle information and symptoms... </p><div class="flex justify-center space-x-2"><div class="w-2 h-2 bg-primary-600 rounded-full animate-bounce"></div><div class="w-2 h-2 bg-primary-600 rounded-full animate-bounce" style="animation-delay:0.1s;"></div><div class="w-2 h-2 bg-primary-600 rounded-full animate-bounce" style="animation-delay:0.2s;"></div></div>',4)])])):h.diagnosisResult?(s(),t("div",tt,[a("div",st,[a("div",at,[x[82]||(x[82]=a("strong",null,"Debug Info:",-1)),u(" AI Provider: "+l((null==(f=h.diagnosisResult)?void 0:f.ai_provider)||"Unknown")+" | Cache Status: "+l(h.debugInfo.cacheStatus)+" | Auth: "+l(h.debugInfo.authStatus),1)]),a("div",rt,[a("button",{onClick:x[35]||(x[35]=(...e)=>h.quickLogin&&h.quickLogin(...e)),class:"btn-secondary text-sm bg-green-100 hover:bg-green-200 text-green-700 border-green-300",title:"Quick login for testing"}," 🔑 Quick Login "),a("button",{onClick:x[36]||(x[36]=(...e)=>h.forceRefreshResults&&h.forceRefreshResults(...e)),class:"btn-secondary text-sm bg-red-100 hover:bg-red-200 text-red-700 border-red-300",title:"Force refresh to get latest results from Gemini API"}," 🚨 Force Refresh (Clear Cache) ")])]),a("div",ot,[a("div",it,[x[83]||(x[83]=a("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white"},"Diagnosis Summary",-1)),a("div",nt,[a("div",lt,[a("div",{class:n(["w-3 h-3 rounded-full mr-2",h.getSeverityColor(h.diagnosisResult.severity)])},null,2),a("span",{class:n(["font-medium text-sm",h.getSeverityTextColor(h.diagnosisResult.severity)])},l(h.getSeverityText(h.diagnosisResult.severity)),3)]),a("div",dt,l(h.diagnosisResult.confidence_score||75)+"% Confidence ",1)])]),a("h4",ct,l(h.diagnosisResult.problem_title||"Vehicle Issue Detected"),1),a("p",ut,l(h.diagnosisResult.problem_summary||h.diagnosisResult.problem_description||h.diagnosisResult.summary),1),h.diagnosisResult.primary_diagnosis?(s(),t("div",mt,[x[84]||(x[84]=a("h5",{class:"font-semibold text-primary-900 dark:text-primary-100 mb-2 flex items-center"},[a("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),u(" Diagnoza Kryesore ")],-1)),a("h6",pt,l(h.diagnosisResult.primary_diagnosis.title),1),a("p",gt,l(h.diagnosisResult.primary_diagnosis.description),1),a("div",yt,[a("div",xt,[a("span",vt," Probabiliteti: "+l(h.diagnosisResult.primary_diagnosis.probability)+"% ",1),h.diagnosisResult.primary_diagnosis.affected_systems?(s(),t("div",ht,[(s(!0),t(o,null,i(h.diagnosisResult.primary_diagnosis.affected_systems,e=>(s(),t("span",{key:e,class:"px-2 py-1 bg-primary-100 dark:bg-primary-800 text-primary-800 dark:text-primary-200 text-xs rounded-full"},l(e),1))),128))])):c("",!0)])])])):c("",!0),h.diagnosisResult.diagnostic_steps?(s(),t("div",kt,[x[85]||(x[85]=a("h5",{class:"font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center"},[a("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})]),u(" Hapat Diagnostikë ")],-1)),a("div",bt,[(s(!0),t(o,null,i(h.diagnosisResult.diagnostic_steps,e=>(s(),t("div",{key:e.step,class:"flex items-start space-x-3"},[a("div",ft,l(e.step),1),a("div",wt,[a("h6",Ct,l(e.action),1),a("p",Mt,l(e.description),1),a("span",{class:n(["inline-block mt-1 px-2 py-1 text-xs rounded-full","easy"===e.difficulty?"bg-green-100 text-green-800":"medium"===e.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"])},l("easy"===e.difficulty?"Lehtë":"medium"===e.difficulty?"Mesatar":"I vështirë"),3)])]))),128))])])):c("",!0),h.diagnosisResult.immediate_actions?(s(),t("div",St,[x[87]||(x[87]=a("h5",{class:"font-semibold text-orange-900 dark:text-orange-100 mb-3 flex items-center"},[a("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})]),u(" Veprimet e Menjëhershme ")],-1)),a("div",Rt,[(s(!0),t(o,null,i(h.diagnosisResult.immediate_actions,(e,r)=>(s(),t("div",{key:r,class:"flex items-start space-x-3"},[a("div",{class:n(["flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-sm font-medium","immediate"===e.urgency?"bg-red-100 text-red-800":"within 1 week"===e.urgency?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"])},[e.safety_important?(s(),t("svg",Tt,[...x[86]||(x[86]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)])])):(s(),t("span",jt,l(r+1),1))],2),a("div",It,[a("h6",Dt,l(e.action),1),a("p",Pt,l(e.description),1),a("div",Ft,[a("span",{class:n(["text-xs px-2 py-1 rounded-full","immediate"===e.urgency?"bg-red-100 text-red-800":"within 1 week"===e.urgency?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"])},l("immediate"===e.urgency?"Menjëherë":"within 1 week"===e.urgency?"Brenda 1 javë":"within 1 month"===e.urgency?"Brenda 1 muaj":"Rutinë"),3),e.safety_important?(s(),t("span",Bt," ⚠️ Siguri ")):c("",!0)])])]))),128))])])):c("",!0),h.diagnosisResult.ai_insights?(s(),t("div",zt,[x[89]||(x[89]=a("h5",{class:"font-medium text-blue-900 dark:text-blue-100 mb-2 flex items-center"},[a("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),u(" AI Insights ")],-1)),a("ul",At,[(s(!0),t(o,null,i(h.diagnosisResult.ai_insights,(e,r)=>(s(),t("li",{key:r,class:"flex items-start"},[x[88]||(x[88]=a("span",{class:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 mr-2 flex-shrink-0"},null,-1)),u(" "+l(e),1)]))),128))])])):c("",!0)]),a("div",null,[x[90]||(x[90]=a("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-3"},"Likely Causes",-1)),a("div",Lt,[(s(!0),t(o,null,i(h.diagnosisResult.likely_causes||h.diagnosisResult.likelyCauses,(e,r)=>(s(),t("div",{key:r,class:"flex items-start"},[a("div",_t,[a("span",Vt,l(r+1),1)]),a("div",null,[a("h4",Ut,l(e.title),1),a("p",Et,l(e.description),1),a("span",Ht,l(e.probability)+"% probability ",1)])]))),128))])]),a("div",null,[x[92]||(x[92]=a("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-3"},"Recommended Actions",-1)),a("div",qt,[(s(!0),t(o,null,i(h.diagnosisResult.recommended_actions||h.diagnosisResult.recommendedActions,(e,r)=>(s(),t("div",{key:r,class:"flex items-start"},[x[91]||(x[91]=a("div",{class:"w-6 h-6 bg-success-100 dark:bg-success-900 rounded-full flex items-center justify-center mr-3 mt-0.5"},[a("svg",{class:"w-3 h-3 text-success-600 dark:text-success-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),a("div",null,[a("h4",Gt,l(e.title),1),a("p",$t,l(e.description),1),a("span",Ot,l(e.urgency),1)])]))),128))])]),h.diagnosisResult.estimated_costs?(s(),t("div",Wt,[x[93]||(x[93]=a("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4 flex items-center"},[a("svg",{class:"w-5 h-5 mr-2 text-warning-600 dark:text-warning-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),u(" Estimated Costs ")],-1)),a("div",Nt,[(s(!0),t(o,null,i(h.diagnosisResult.estimated_costs,e=>(s(),t("div",{key:e.service,class:"flex justify-between items-center p-3 bg-white dark:bg-secondary-800 rounded-lg border border-warning-200 dark:border-warning-700"},[a("span",Yt,l(e.service),1),a("span",Jt," €"+l(e.min)+" - €"+l(e.max),1)]))),128))]),x[94]||(x[94]=a("p",{class:"text-xs text-warning-600 dark:text-warning-400 mt-3"}," * Cost estimates are approximate and may vary based on location and specific vehicle requirements. ",-1))])):c("",!0),h.diagnosisResult.requires_immediate_attention?(s(),t("div",Qt,[...x[95]||(x[95]=[r('<div class="flex items-center"><svg class="w-6 h-6 text-red-600 dark:text-red-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg><div><h4 class="font-semibold text-red-900 dark:text-red-100">Immediate Attention Required</h4><p class="text-sm text-red-700 dark:text-red-300 mt-1"> This issue requires immediate professional attention to prevent further damage or safety risks. </p></div></div>',1)])])):c("",!0)])):(s(),t("div",Kt,[...x[96]||(x[96]=[r('<svg class="mx-auto h-16 w-16 text-secondary-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg><h3 class="text-lg font-medium text-secondary-900 dark:text-white mb-2">Ready for Diagnosis</h3><p class="text-secondary-600 dark:text-secondary-400 mb-6"> Fill out the form and submit to get AI-powered diagnosis results. </p><div class="bg-primary-50 dark:bg-primary-900/20 rounded-lg p-4 text-left max-w-md mx-auto"><h4 class="text-sm font-semibold text-primary-800 dark:text-primary-200 mb-3">💡 Quick Tips:</h4><ul class="text-sm text-primary-700 dark:text-primary-300 space-y-2"><li class="flex items-start"><span class="mr-2">📝</span><span>Describe symptoms in detail for better accuracy</span></li><li class="flex items-start"><span class="mr-2">📸</span><span>Upload photos or videos of the problem area</span></li><li class="flex items-start"><span class="mr-2">🎤</span><span>Use voice recording for hands-free input</span></li><li class="flex items-start"><span class="mr-2">✅</span><span>Select all relevant symptoms from the checklist</span></li></ul></div>',4)])]))])])])])}]]);export{Xt as default};
