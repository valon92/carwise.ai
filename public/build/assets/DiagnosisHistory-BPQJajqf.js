import{c as e,g as s,b as r,e as a,t as o,n as d,F as i,m as n,k as l,q as c,s as u,v as g,a as m,w as x,f as y,r as p,y as k,o as v,B as b,l as h}from"./vendor-CkCPX7gN.js";import{d as f}from"./api-CrWVQuGn.js";import{_ as w}from"./app-B4duU-Iu.js";import"./utils-BruBI8_W.js";const C={class:"space-y-6"},D={class:"bg-gradient-to-r from-primary-50 to-secondary-50 dark:from-primary-900/20 dark:to-secondary-900/20 rounded-lg p-6"},_={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},S={class:"font-medium text-secondary-900 dark:text-white"},L={class:"font-medium text-secondary-900 dark:text-white"},M={class:"font-medium text-secondary-900 dark:text-white"},j={class:"bg-secondary-50 dark:bg-secondary-700/50 rounded-lg p-4"},B={class:"text-secondary-700 dark:text-secondary-300"},F={key:0},T={class:"space-y-3"},A={class:"font-medium text-secondary-900 dark:text-white mb-2"},P={class:"text-sm text-secondary-600 dark:text-secondary-400"},H={key:1},N={class:"space-y-3"},U={class:"font-medium text-secondary-900 dark:text-white mb-2"},V={class:"text-sm text-secondary-600 dark:text-secondary-400"},R={key:2},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I={class:"font-medium text-secondary-900 dark:text-white mb-2"},z={class:"text-sm text-secondary-600 dark:text-secondary-400"},O={class:"text-lg font-semibold text-primary-600 dark:text-primary-400 mt-2"},E={key:3},J={class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4"},Q={class:"text-blue-800 dark:text-blue-200"},Y={key:4},G={class:"flex flex-wrap gap-2"},K={key:5,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg p-6"},W={class:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-secondary-900 dark:to-secondary-800"},X={class:"bg-white/80 dark:bg-secondary-800/80 backdrop-blur-md border-b border-secondary-200 dark:border-secondary-700"},Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},$={class:"flex items-center justify-between"},ee={class:"flex items-center space-x-4"},te={class:"flex items-center space-x-4"},se={class:"text-sm text-secondary-600 dark:text-secondary-400"},re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ae={class:"bg-white/80 dark:bg-secondary-800/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 dark:border-secondary-700/20 mb-8"},oe={class:"flex flex-wrap items-center gap-4"},de={class:"flex-1 min-w-64"},ie={key:0,class:"text-center py-12"},ne={key:1,class:"text-center py-20"},le={class:"text-secondary-600 dark:text-secondary-400 mb-6"},ce={key:2,class:"space-y-6"},ue={class:"flex items-start justify-between mb-4"},ge={class:"flex-1"},me={class:"flex items-center space-x-3 mb-2"},xe={class:"text-lg font-semibold text-secondary-900 dark:text-white"},ye={class:"text-sm text-secondary-600 dark:text-secondary-400"},pe={class:"flex items-center space-x-2"},ke=["onClick"],ve=["onClick"],be={class:"mb-4"},he={class:"text-sm text-secondary-600 dark:text-secondary-400 bg-secondary-50 dark:bg-secondary-700/50 rounded-lg p-3"},fe={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},we={class:"bg-primary-50 dark:bg-primary-900/20 rounded-lg p-4"},Ce={class:"text-sm text-primary-900 dark:text-primary-100"},De={class:"bg-info-50 dark:bg-info-900/20 rounded-lg p-4"},_e={class:"text-sm text-info-900 dark:text-info-100"},Se={class:"bg-success-50 dark:bg-success-900/20 rounded-lg p-4"},Le={class:"text-sm text-success-900 dark:text-success-100"},Me={key:1,class:"mt-4"},je={class:"flex flex-wrap gap-2"},Be={key:3,class:"mt-8 flex items-center justify-between"},Fe={class:"text-sm text-secondary-600 dark:text-secondary-400"},Te={class:"flex items-center space-x-2"},Ae={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Pe={class:"bg-white dark:bg-secondary-800 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden"},He={class:"flex items-center justify-between p-6 border-b border-secondary-200 dark:border-secondary-700"},Ne={class:"text-lg font-semibold text-secondary-900 dark:text-white"},Ue={class:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]"},Ve=w({name:"DiagnosisHistory",components:{DiagnosisDetail:w({name:"DiagnosisDetail",props:{diagnosis:{type:Object,required:!0}},methods:{getLikelyCauses(){var e;if(!(null==(e=this.diagnosis.result)?void 0:e.likely_causes))return[];try{return"string"==typeof this.diagnosis.result.likely_causes?JSON.parse(this.diagnosis.result.likely_causes):this.diagnosis.result.likely_causes}catch(t){return[]}},getRecommendedActions(){var e;if(!(null==(e=this.diagnosis.result)?void 0:e.recommended_actions))return[];try{return"string"==typeof this.diagnosis.result.recommended_actions?JSON.parse(this.diagnosis.result.recommended_actions):this.diagnosis.result.recommended_actions}catch(t){return[]}},getEstimatedCosts(){var e;if(!(null==(e=this.diagnosis.result)?void 0:e.estimated_costs))return[];try{return"string"==typeof this.diagnosis.result.estimated_costs?JSON.parse(this.diagnosis.result.estimated_costs):this.diagnosis.result.estimated_costs}catch(t){return[]}},getSeverityBadgeClass(e){switch(null==e?void 0:e.toLowerCase()){case"low":return"bg-success-100 dark:bg-success-900 text-success-600 dark:text-success-400";case"medium":return"bg-warning-100 dark:bg-warning-900 text-warning-600 dark:text-warning-400";case"high":return"bg-danger-100 dark:bg-danger-900 text-danger-600 dark:text-danger-400";case"critical":return"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400";default:return"bg-secondary-100 dark:bg-secondary-700 text-secondary-600 dark:text-secondary-400"}},getSeverityText(e){switch(null==e?void 0:e.toLowerCase()){case"low":return"Low";case"medium":return"Medium";case"high":return"High";case"critical":return"Critical";default:return"Unknown"}}}},[["render",function(t,c,u,g,m,x){var y,p,k,v,b,h,f,w,W,X;return s(),e("div",C,[r("div",D,[c[4]||(c[4]=r("h4",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4"},"Diagnosis Summary",-1)),r("div",_,[r("div",null,[c[0]||(c[0]=r("p",{class:"text-sm text-secondary-600 dark:text-secondary-400"},"Problem Title",-1)),r("p",S,o((null==(y=u.diagnosis.result)?void 0:y.problem_title)||"N/A"),1)]),r("div",null,[c[1]||(c[1]=r("p",{class:"text-sm text-secondary-600 dark:text-secondary-400"},"Severity",-1)),r("span",{class:d([x.getSeverityBadgeClass(null==(p=u.diagnosis.result)?void 0:p.severity),"px-2 py-1 rounded-full text-xs font-medium"])},o(x.getSeverityText(null==(k=u.diagnosis.result)?void 0:k.severity)),3)]),r("div",null,[c[2]||(c[2]=r("p",{class:"text-sm text-secondary-600 dark:text-secondary-400"},"Confidence Score",-1)),r("p",L,o((null==(v=u.diagnosis.result)?void 0:v.confidence_score)||"N/A")+"%",1)]),r("div",null,[c[3]||(c[3]=r("p",{class:"text-sm text-secondary-600 dark:text-secondary-400"},"Processing Time",-1)),r("p",M,o((null==(b=u.diagnosis.result)?void 0:b.processing_time)||"N/A")+"s",1)])])]),r("div",null,[c[5]||(c[5]=r("h4",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4"},"Problem Description",-1)),r("div",j,[r("p",B,o(u.diagnosis.description),1)])]),(null==(h=u.diagnosis.result)?void 0:h.likely_causes)?(s(),e("div",F,[c[6]||(c[6]=r("h4",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4"},"Likely Causes",-1)),r("div",T,[(s(!0),e(i,null,n(x.getLikelyCauses(),(t,a)=>(s(),e("div",{key:a,class:"bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700 rounded-lg p-4"},[r("h5",A,o(t.title),1),r("p",P,o(t.description),1)]))),128))])])):a("",!0),(null==(f=u.diagnosis.result)?void 0:f.recommended_actions)?(s(),e("div",H,[c[7]||(c[7]=r("h4",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4"},"Recommended Actions",-1)),r("div",N,[(s(!0),e(i,null,n(x.getRecommendedActions(),(t,a)=>(s(),e("div",{key:a,class:"bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700 rounded-lg p-4"},[r("h5",U,o(t.title),1),r("p",V,o(t.description),1)]))),128))])])):a("",!0),(null==(w=u.diagnosis.result)?void 0:w.estimated_costs)?(s(),e("div",R,[c[8]||(c[8]=r("h4",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4"},"Estimated Costs",-1)),r("div",q,[(s(!0),e(i,null,n(x.getEstimatedCosts(),(t,a)=>(s(),e("div",{key:a,class:"bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700 rounded-lg p-4"},[r("h5",I,o(t.service),1),r("p",z,o(t.description),1),r("p",O,o(t.cost),1)]))),128))])])):a("",!0),(null==(W=u.diagnosis.result)?void 0:W.ai_insights)?(s(),e("div",E,[c[9]||(c[9]=r("h4",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4"},"AI Insights",-1)),r("div",J,[r("p",Q,o(u.diagnosis.result.ai_insights),1)])])):a("",!0),u.diagnosis.symptoms&&u.diagnosis.symptoms.length>0?(s(),e("div",Y,[c[10]||(c[10]=r("h4",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-4"},"Reported Symptoms",-1)),r("div",G,[(s(!0),e(i,null,n(u.diagnosis.symptoms,t=>(s(),e("span",{key:t,class:"px-3 py-1 bg-secondary-100 dark:bg-secondary-700 text-secondary-700 dark:text-secondary-300 rounded-full text-sm"},o(t),1))),128))])])):a("",!0),(null==(X=u.diagnosis.result)?void 0:X.requires_immediate_attention)?(s(),e("div",K,[...c[11]||(c[11]=[l('<div class="flex items-center"><svg class="w-6 h-6 text-red-600 dark:text-red-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg><div><h4 class="font-semibold text-red-900 dark:text-red-100">Immediate Attention Required</h4><p class="text-sm text-red-700 dark:text-red-300 mt-1"> This issue requires immediate professional attention to prevent further damage or safety risks. </p></div></div>',1)])])):a("",!0)])}]])},setup(){const e=b(),s=p([]),r=p(!0),a=p(null),o=p(""),d=p(""),i=p(""),n=p(!1),l=k(()=>{let e=s.value;if(o.value){const t=o.value.toLowerCase();e=e.filter(e=>{var s,r;return e.make.toLowerCase().includes(t)||e.model.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||(null==(r=null==(s=e.result)?void 0:s.problem_title)?void 0:r.toLowerCase().includes(t))})}return d.value&&(e=e.filter(e=>e.status===d.value)),i.value&&(e=e.filter(e=>{var t;return(null==(t=e.result)?void 0:t.severity)===i.value})),e}),c=()=>{return e=function*(){var e;try{r.value=!0;const t=yield f.getHistory();t.data.success&&(s.value=(null==(e=t.data.data)?void 0:e.data)||[])}catch(t){}finally{r.value=!1}},new Promise((t,s)=>{var r=t=>{try{o(e.next(t))}catch(r){s(r)}},a=t=>{try{o(e.throw(t))}catch(r){s(r)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,a);o((e=e.apply(null,null)).next())});var e};return v(()=>{localStorage.getItem("token")?c():e.push("/login")}),{diagnoses:s,isLoading:r,selectedDiagnosis:a,searchQuery:o,statusFilter:d,severityFilter:i,hasMore:n,filteredDiagnoses:l,loadDiagnoses:c,goBack:()=>{e.push("/dashboard")},viewDiagnosis:e=>{a.value=e},closeModal:()=>{a.value=null},downloadReport:e=>{alert("Download feature coming soon!")},clearFilters:()=>{o.value="",d.value="",i.value=""},loadMore:()=>{},formatDate:e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",getStatusBadgeClass:e=>{switch(null==e?void 0:e.toLowerCase()){case"completed":return"bg-success-100 dark:bg-success-900 text-success-600 dark:text-success-400";case"processing":return"bg-warning-100 dark:bg-warning-900 text-warning-600 dark:text-warning-400";case"failed":return"bg-danger-100 dark:bg-danger-900 text-danger-600 dark:text-danger-400";default:return"bg-secondary-100 dark:bg-secondary-700 text-secondary-600 dark:text-secondary-400"}},getStatusText:e=>{switch(null==e?void 0:e.toLowerCase()){case"completed":return"Completed";case"processing":return"Processing";case"failed":return"Failed";default:return"Unknown"}},getSeverityBadgeClass:e=>{switch(null==e?void 0:e.toLowerCase()){case"low":return"bg-success-100 dark:bg-success-900 text-success-600 dark:text-success-400";case"medium":return"bg-warning-100 dark:bg-warning-900 text-warning-600 dark:text-warning-400";case"high":return"bg-danger-100 dark:bg-danger-900 text-danger-600 dark:text-danger-400";case"critical":return"bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400";default:return"bg-secondary-100 dark:bg-secondary-700 text-secondary-600 dark:text-secondary-400"}},getSeverityText:e=>{switch(null==e?void 0:e.toLowerCase()){case"low":return"Low";case"medium":return"Medium";case"high":return"High";case"critical":return"Critical";default:return"Unknown"}},t:t}}},[["render",function(t,p,k,v,b,f){const w=y("router-link"),C=y("DiagnosisDetail");return s(),e("div",W,[r("div",X,[r("div",Z,[r("div",$,[r("div",ee,[r("button",{onClick:p[0]||(p[0]=(...e)=>v.goBack&&v.goBack(...e)),class:"p-2 text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-white transition-colors duration-200"},[...p[7]||(p[7]=[r("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),p[8]||(p[8]=r("div",null,[r("h1",{class:"text-2xl font-bold text-secondary-900 dark:text-white"},"Diagnosis History"),r("p",{class:"text-secondary-600 dark:text-secondary-400"},"View all your past car diagnoses")],-1))]),r("div",te,[r("div",se," Total: "+o(v.diagnoses.length)+" diagnoses ",1)])])])]),r("div",re,[r("div",ae,[r("div",oe,[r("div",de,[c(r("input",{"onUpdate:modelValue":p[1]||(p[1]=e=>v.searchQuery=e),type:"text",placeholder:"Search by car make, model, or problem...",class:"input w-full"},null,512),[[u,v.searchQuery]])]),c(r("select",{"onUpdate:modelValue":p[2]||(p[2]=e=>v.statusFilter=e),class:"input min-w-32"},[...p[9]||(p[9]=[r("option",{value:""},"All Status",-1),r("option",{value:"completed"},"Completed",-1),r("option",{value:"processing"},"Processing",-1),r("option",{value:"failed"},"Failed",-1)])],512),[[g,v.statusFilter]]),c(r("select",{"onUpdate:modelValue":p[3]||(p[3]=e=>v.severityFilter=e),class:"input min-w-32"},[...p[10]||(p[10]=[l('<option value="">All Severity</option><option value="low">Low</option><option value="medium">Medium</option><option value="high">High</option><option value="critical">Critical</option>',5)])],512),[[g,v.severityFilter]]),r("button",{onClick:p[4]||(p[4]=(...e)=>v.clearFilters&&v.clearFilters(...e)),class:"btn-outline text-sm"}," Clear Filters ")])]),v.isLoading?(s(),e("div",ie,[...p[11]||(p[11]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto"},null,-1),r("p",{class:"text-secondary-600 dark:text-secondary-400 mt-4"},"Loading diagnosis history...",-1)])])):0===v.filteredDiagnoses.length?(s(),e("div",ne,[p[13]||(p[13]=r("svg",{class:"w-16 h-16 text-secondary-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),p[14]||(p[14]=r("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white mb-2"},"No diagnoses found",-1)),r("p",le,o(0===v.diagnoses.length?"You haven't performed any diagnoses yet.":"No diagnoses match your current filters."),1),m(w,{to:"/diagnose",class:"btn-primary"},{default:x(()=>[...p[12]||(p[12]=[r("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),h(" Start New Diagnosis ",-1)])]),_:1})])):(s(),e("div",ce,[(s(!0),e(i,null,n(v.filteredDiagnoses,t=>{var l,c;return s(),e("div",{key:t.id,class:"bg-white/80 dark:bg-secondary-800/80 backdrop-blur-md rounded-2xl p-6 border border-white/20 dark:border-secondary-700/20 hover:shadow-lg transition-all duration-200"},[r("div",ue,[r("div",ge,[r("div",me,[r("h3",xe,o(t.make)+" "+o(t.model)+" ("+o(t.year)+") ",1),r("span",{class:d([v.getStatusBadgeClass(t.status),"px-2 py-1 rounded-full text-xs font-medium"])},o(v.getStatusText(t.status)),3),(null==(l=t.result)?void 0:l.severity)?(s(),e("span",{key:0,class:d([v.getSeverityBadgeClass(t.result.severity),"px-2 py-1 rounded-full text-xs font-medium"])},o(v.getSeverityText(t.result.severity)),3)):a("",!0)]),r("p",ye,o(v.formatDate(t.created_at))+" • "+o((null==(c=t.result)?void 0:c.ai_provider)||"Unknown AI"),1)]),r("div",pe,[r("button",{onClick:e=>v.viewDiagnosis(t),class:"btn-outline text-sm"}," View Details ",8,ke),r("button",{onClick:e=>v.downloadReport(t),class:"btn-secondary text-sm"},[...p[15]||(p[15]=[r("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),h(" Download ",-1)])],8,ve)])]),r("div",be,[p[16]||(p[16]=r("h4",{class:"text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"},"Problem Description",-1)),r("p",he,o(t.description),1)]),t.result?(s(),e("div",fe,[r("div",we,[p[17]||(p[17]=r("h5",{class:"text-sm font-medium text-primary-700 dark:text-primary-300 mb-1"},"Problem Title",-1)),r("p",Ce,o(t.result.problem_title),1)]),r("div",De,[p[18]||(p[18]=r("h5",{class:"text-sm font-medium text-info-700 dark:text-info-300 mb-1"},"Confidence Score",-1)),r("p",_e,o(t.result.confidence_score)+"%",1)]),r("div",Se,[p[19]||(p[19]=r("h5",{class:"text-sm font-medium text-success-700 dark:text-success-300 mb-1"},"Processing Time",-1)),r("p",Le,o(t.result.processing_time)+"s",1)])])):a("",!0),t.symptoms&&t.symptoms.length>0?(s(),e("div",Me,[p[20]||(p[20]=r("h4",{class:"text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"},"Reported Symptoms",-1)),r("div",je,[(s(!0),e(i,null,n(t.symptoms,t=>(s(),e("span",{key:t,class:"px-3 py-1 bg-secondary-100 dark:bg-secondary-700 text-secondary-700 dark:text-secondary-300 rounded-full text-xs"},o(t),1))),128))])])):a("",!0)])}),128))])),v.filteredDiagnoses.length>0?(s(),e("div",Be,[r("div",Fe," Showing "+o(v.filteredDiagnoses.length)+" of "+o(v.diagnoses.length)+" diagnoses ",1),r("div",Te,[v.hasMore?(s(),e("button",{key:0,onClick:p[5]||(p[5]=(...e)=>v.loadMore&&v.loadMore(...e)),class:"btn-outline text-sm"}," Load More ")):a("",!0)])])):a("",!0)]),v.selectedDiagnosis?(s(),e("div",Ae,[r("div",Pe,[r("div",He,[r("h3",Ne," Diagnosis Details - "+o(v.selectedDiagnosis.make)+" "+o(v.selectedDiagnosis.model),1),r("button",{onClick:p[6]||(p[6]=(...e)=>v.closeModal&&v.closeModal(...e)),class:"p-2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300"},[...p[21]||(p[21]=[r("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),r("div",Ue,[m(C,{diagnosis:v.selectedDiagnosis},null,8,["diagnosis"])])])])):a("",!0)])}]]);export{Ve as default};
