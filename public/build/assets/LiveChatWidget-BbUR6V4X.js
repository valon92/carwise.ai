var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,r=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))i.call(t,a)&&s(e,a,t[a]);return e},l=(e,n)=>t(e,a(n)),c=(e,t,a)=>new Promise((n,o)=>{var i=e=>{try{r(a.next(e))}catch(t){o(t)}},s=e=>{try{r(a.throw(e))}catch(t){o(t)}},r=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);r((a=a.apply(e,t)).next())});import{r as d,y as u,o as p,H as y,B as g,c as m,g as v,a as h,w as f,T as b,n as w,e as k,G as x,b as C,t as E,F as S,m as T,l as I,q as N,v as _,z as O}from"./vendor-DFhOdd_z.js";import{_ as A}from"./app-C93G0LpX.js";function M(){const e=d([]),t=d(!1),a=d({enableBrowserNotifications:!0,enableInAppNotifications:!0,enableSoundNotifications:!0,enableEmailNotifications:!1,enablePushNotifications:!1,autoMarkAsRead:!1,notificationDuration:5e3,maxNotifications:50,enabledCategories:{price_alerts:!0,stock_alerts:!0,order_updates:!0,system_updates:!0,promotions:!0,maintenance:!0,security:!0}}),n={PRICE_ALERT:"price_alert",STOCK_ALERT:"stock_alert",ORDER_UPDATE:"order_update",SYSTEM_UPDATE:"system_update",PROMOTION:"promotion",MAINTENANCE:"maintenance",SECURITY:"security",SUCCESS:"success",WARNING:"warning",ERROR:"error",INFO:"info"},o={LOW:"low",MEDIUM:"medium",HIGH:"high",CRITICAL:"critical"};let i=0;const s="/sounds/info.mp3",g=t=>{const s={id:`notification_${Date.now()}_${++i}`,title:t.title||"Notification",message:t.message||"",type:t.type||n.INFO,priority:t.priority||o.MEDIUM,category:t.category||"general",timestamp:new Date,isRead:!1,isSticky:t.isSticky||!1,duration:t.duration||a.value.notificationDuration,actions:t.actions||[],data:t.data||{},icon:t.icon||k(t.type),color:t.color||x(t.type),sound:t.sound||C(t.type),onClick:t.onClick||null,onClose:t.onClose||null};return a.value.enabledCategories[s.category]?(e.value.unshift(s),e.value.length>a.value.maxNotifications&&(e.value=e.value.slice(0,a.value.maxNotifications)),a.value.enableInAppNotifications&&m(s),a.value.enableBrowserNotifications&&b(s),a.value.enableSoundNotifications&&s.sound&&w(s.sound),!s.isSticky&&s.duration>0&&setTimeout(()=>{S(s.id)},s.duration),a.value.autoMarkAsRead&&setTimeout(()=>{E(s.id)},s.duration/2),N(),s):null},m=e=>{const t=h(),a=v(e);t.appendChild(a),setTimeout(()=>{a.classList.add("notification-enter")},100),e.isSticky||setTimeout(()=>{f(a)},e.duration)},v=e=>{const t=document.createElement("div");return t.id=`notification-${e.id}`,t.className=`notification-toast ${e.type} ${e.priority}`,t.innerHTML=`\n      <div class="notification-content ${{low:"bg-gray-500",medium:"bg-blue-500",high:"bg-orange-500",critical:"bg-red-500"}[e.priority]} text-white rounded-lg shadow-lg p-4 mb-2 max-w-sm transform translate-x-full transition-all duration-300 ease-out">\n        <div class="flex items-start justify-between">\n          <div class="flex items-start space-x-3">\n            <div class="flex-shrink-0">\n              <span class="text-lg">${e.icon||{success:"âœ“",warning:"âš ",error:"âœ•",info:"â„¹"}[e.type]||"â„¹"}</span>\n            </div>\n            <div class="flex-1 min-w-0">\n              <div class="font-semibold text-sm">${e.title}</div>\n              <div class="text-sm opacity-90 mt-1">${e.message}</div>\n              <div class="text-xs opacity-75 mt-2">${e.timestamp.toLocaleTimeString()}</div>\n            </div>\n          </div>\n          <button class="notification-close ml-2 text-white hover:text-gray-200 focus:outline-none" onclick="this.closest('.notification-toast').remove()">\n            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n            </svg>\n          </button>\n        </div>\n        ${e.actions.length>0?`\n          <div class="mt-3 flex space-x-2">\n            ${e.actions.map(e=>`\n              <button class="px-3 py-1 text-xs bg-white bg-opacity-20 rounded hover:bg-opacity-30 transition-colors" \n                      onclick="${e.handler}">\n                ${e.label}\n              </button>\n            `).join("")}\n          </div>\n        `:""}\n      </div>\n    `,e.onClick&&t.addEventListener("click",e.onClick),t},h=()=>{let e=document.getElementById("notification-container");return e||(e=document.createElement("div"),e.id="notification-container",e.className="fixed top-4 right-4 z-50 pointer-events-none",e.style.cssText="max-height: 80vh; overflow-y: auto;",document.body.appendChild(e)),e},f=e=>{e&&e.parentNode&&(e.classList.add("notification-exit"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300))},b=e=>{if("Notification"in window&&"granted"===Notification.permission){const t=new Notification(e.title,{body:e.message,icon:"/icons/icon-96x96.png",badge:"/icons/icon-96x96.png",tag:`carwise-${e.type}-${e.id}`,requireInteraction:e.priority===o.CRITICAL,silent:!a.value.enableSoundNotifications,data:e.data});t.onclick=()=>{window.focus(),e.onClick&&e.onClick(),t.close()},e.priority!==o.CRITICAL&&setTimeout(()=>t.close(),e.duration)}},w=e=>{try{const t=new Audio(e);t.volume=.5,t.play().catch(e=>{})}catch(t){}},k=e=>({[n.SUCCESS]:"âœ“",[n.WARNING]:"âš ",[n.ERROR]:"âœ•",[n.INFO]:"â„¹",[n.PRICE_ALERT]:"ðŸ’°",[n.STOCK_ALERT]:"ðŸ“¦",[n.ORDER_UPDATE]:"ðŸ›’",[n.PROMOTION]:"ðŸ·ï¸",[n.MAINTENANCE]:"ðŸ”§",[n.SECURITY]:"ðŸ”’"}[e]||"â„¹"),x=e=>({[n.SUCCESS]:"green",[n.WARNING]:"orange",[n.ERROR]:"red",[n.INFO]:"blue",[n.PRICE_ALERT]:"yellow",[n.STOCK_ALERT]:"purple",[n.ORDER_UPDATE]:"indigo",[n.PROMOTION]:"pink",[n.MAINTENANCE]:"gray",[n.SECURITY]:"red"}[e]||"blue"),C=e=>({[n.SUCCESS]:"/sounds/success.mp3",[n.WARNING]:"/sounds/warning.mp3",[n.ERROR]:"/sounds/error.mp3",[n.INFO]:s}[e]||s),E=t=>{const a=e.value.find(e=>e.id===t);a&&(a.isRead=!0,N())},S=t=>{const a=e.value.findIndex(e=>e.id===t);if(-1!==a){const n=e.value[a];e.value.splice(a,1);const o=document.getElementById(`notification-${t}`);o&&f(o),n.onClose&&n.onClose(),N()}},T=(t=24)=>{const a=new Date(Date.now()-60*t*60*1e3);e.value.filter(e=>e.timestamp<a).forEach(e=>{S(e.id)})},I=()=>c(null,null,function*(){return"Notification"in window&&("default"===Notification.permission?"granted"===(yield Notification.requestPermission()):"granted"===Notification.permission)}),N=()=>{try{const t={notifications:e.value.slice(0,20),settings:a.value};localStorage.setItem("carwise_notifications",JSON.stringify(t))}catch(t){}},_=u(()=>e.value.filter(e=>!e.isRead)),O=u(()=>_.value.length),A=u(()=>{const t={};return e.value.forEach(e=>{t[e.type]||(t[e.type]=[]),t[e.type].push(e)}),t}),M=u(()=>e.value.filter(e=>e.priority===o.CRITICAL&&!e.isRead));p(()=>{(()=>{try{const t=localStorage.getItem("carwise_notifications");if(t){const n=JSON.parse(t);n.notifications&&(e.value=n.notifications.map(e=>l(r({},e),{timestamp:new Date(e.timestamp)}))),n.settings&&(a.value=r(r({},a.value),n.settings))}}catch(t){}})(),I(),setInterval(()=>{T(24)},36e5),R()}),y(()=>{N()});const R=()=>{if(document.getElementById("notification-styles"))return;const e=document.createElement("style");e.id="notification-styles",e.textContent="\n      .notification-toast {\n        pointer-events: auto;\n      }\n      \n      .notification-content {\n        transform: translateX(100%);\n        transition: transform 0.3s ease-out;\n      }\n      \n      .notification-enter .notification-content {\n        transform: translateX(0);\n      }\n      \n      .notification-exit .notification-content {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n      \n      .notification-close {\n        transition: opacity 0.2s ease;\n      }\n      \n      .notification-close:hover {\n        opacity: 0.7;\n      }\n    ",document.head.appendChild(e)};return{notifications:e,isNotificationCenterOpen:t,notificationSettings:a,createNotification:g,markAsRead:E,markAllAsRead:()=>{e.value.forEach(e=>{e.isRead=!0}),N()},removeNotification:S,clearAllNotifications:()=>{e.value.forEach(e=>{e.onClose&&e.onClose()}),e.value=[];const t=document.getElementById("notification-container");t&&(t.innerHTML=""),N()},clearOldNotifications:T,toggleNotificationCenter:()=>{t.value=!t.value},requestNotificationPermission:I,showSuccess:(e,t,a={})=>g(r({title:e,message:t,type:n.SUCCESS,priority:o.LOW},a)),showWarning:(e,t,a={})=>g(r({title:e,message:t,type:n.WARNING,priority:o.MEDIUM},a)),showError:(e,t,a={})=>g(r({title:e,message:t,type:n.ERROR,priority:o.HIGH,isSticky:!0},a)),showInfo:(e,t,a={})=>g(r({title:e,message:t,type:n.INFO,priority:o.LOW},a)),showPriceAlert:(e,t,a={})=>g({title:e,message:t,type:n.PRICE_ALERT,category:"price_alerts",priority:o.MEDIUM,data:a,actions:[{label:"View Part",handler:`window.location.href='/parts/${a.partId}'`}]}),showStockAlert:(e,t,a={})=>g({title:e,message:t,type:n.STOCK_ALERT,category:"stock_alerts",priority:a.critical?o.HIGH:o.MEDIUM,data:a}),unreadNotifications:_,unreadCount:O,notificationsByType:A,criticalNotifications:M,NOTIFICATION_TYPES:n,NOTIFICATION_PRIORITIES:o}}const R={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center animate-pulse"},D={key:1,class:"absolute -top-1 -left-1 bg-green-500 rounded-full h-3 w-3 border-2 border-white",title:"Agents online"},j={class:"bg-primary-600 text-white p-4 flex items-center justify-between"},P={class:"flex items-center space-x-3"},L={class:"relative"},$={key:0,class:"w-8 h-8 bg-white rounded-full flex items-center justify-center"},F=["src","alt"],z={key:1,class:"text-primary-600 font-semibold text-sm"},U={key:1,class:"w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center"},B={key:2,class:"absolute -bottom-1 -right-1 bg-green-500 rounded-full h-3 w-3 border-2 border-primary-600"},G={key:0},H={class:"font-semibold text-sm"},W={class:"text-xs opacity-90"},Y={class:"flex items-center space-x-2"},J=["title"],q={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},X={key:0,class:"flex flex-col h-80"},V={id:"chat-messages-container",class:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-900"},Q={key:0,class:"text-center py-8"},Z={class:"space-y-2"},ee={key:0},te={key:1,class:"space-y-2"},ae=["src","alt"],ne={key:0},oe={key:2,class:"space-y-2"},ie=["href","download"],se={key:0},re={key:0,class:"ml-1"},le={key:1,class:"ml-1"},ce={key:1,class:"flex justify-start"},de={class:"border-t border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800"},ue={class:"flex items-end space-x-2"},pe={class:"flex-1"},ye=["disabled"],ge=["disabled"],me={key:0,class:"mt-2 text-xs text-center"},ve=["accept"],he=A({__name:"LiveChatWidget",props:{isCartOpen:{type:Boolean,default:!1}},setup(e){const{isConnected:t,isChatOpen:a,isMinimized:n,agentTyping:o,connectionStatus:i,messages:s,unreadCount:A,onlineAgents:he,chatSettings:fe,openChat:be,closeChat:we,minimizeChat:ke,maximizeChat:xe,sendChatMessage:Ce,sendTypingIndicator:Ee,uploadFile:Se,setCurrentUser:Te,canSendMessages:Ie,agentInfo:Ne,MESSAGE_TYPES:_e}=function(){const{showInfo:e,showSuccess:t,showError:a}=M(),n=d(!1),o=d(!1),i=d(!1),s=d(!1),g=d(!1),m=d("disconnected"),v=d(null),h=d(null),f=d([]),b=d([]),w=d(0),k=d([]),x=d({enableSound:!0,enableNotifications:!0,autoOpenOnMessage:!1,showTypingIndicator:!0,maxFileSize:10485760,allowedFileTypes:["image/jpeg","image/png","image/gif","application/pdf","text/plain"]}),C={WAITING:"waiting",CONNECTED:"connected",ENDED:"ended",TRANSFERRED:"transferred"},E={TEXT:"text",IMAGE:"image",FILE:"file",SYSTEM:"system",TYPING:"typing",AGENT_JOINED:"agent_joined",AGENT_LEFT:"agent_left",CONVERSATION_ENDED:"conversation_ended"};let S=null,T=0,I=null;const N=()=>{S&&S.readyState===WebSocket.OPEN||(S=new WebSocket("ws://localhost:6001/chat"),S.onopen=()=>{n.value=!0,m.value="connected",T=0,v.value&&A({type:"auth",user_id:v.value.id,user_name:v.value.name,user_email:v.value.email})},S.onmessage=e=>{const t=JSON.parse(e.data);O(t)},S.onclose=()=>{n.value=!1,m.value="disconnected",T<5&&(T++,setTimeout(()=>{N()},2e3*T))},S.onerror=e=>{m.value="error"})},_=()=>{S&&(S.close(),S=null)},O=e=>{switch(e.type){case"message":j(e.payload);break;case"typing":P(e.payload);break;case"agent_status":L(e.payload);break;case"conversation_update":$(e.payload);break;case"system_notification":F(e.payload)}},A=e=>{S&&S.readyState===WebSocket.OPEN?S.send(JSON.stringify(e)):a("Chat Error","Connection lost. Please try again.")},R=(e=null)=>c(null,null,function*(){try{const a=yield fetch("/api/chat/conversations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({initial_message:e,user_agent:navigator.userAgent,page_url:window.location.href})}),n=yield a.json();if(!n.success)throw new Error(n.message||"Failed to start conversation");h.value=n.data,b.value=n.data.messages||[],o.value=!0,e&&(yield D(e)),t("Chat Started","Connected to support. An agent will be with you shortly.")}catch(n){a("Chat Error","Failed to start chat. Please try again.")}}),D=(e,...t)=>c(null,[e,...t],function*(e,t=E.TEXT,a=[]){var n,o;if(!h.value)return void(yield R(e));const i={id:`temp_${Date.now()}`,conversation_id:h.value.id,content:e,type:t,attachments:a,sender_type:"user",sender_id:null==(n=v.value)?void 0:n.id,sender_name:(null==(o=v.value)?void 0:o.name)||"Guest",timestamp:new Date,is_read:!1,temp:!0};j(i);try{A({type:"chat_message",payload:i});const n=yield fetch(`/api/chat/conversations/${h.value.id}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({content:e,type:t,attachments:a})}),o=yield n.json();if(o.success){const e=b.value.findIndex(e=>e.id===i.id);-1!==e&&(b.value[e]=l(r({},o.data),{temp:!1}))}}catch(s){const e=b.value.findIndex(e=>e.id===i.id);-1!==e&&(b.value[e].failed=!0)}}),j=t=>{b.value.find(e=>e.id===t.id)||(b.value.push(l(r({},t),{timestamp:new Date(t.timestamp)})),"agent"!==t.sender_type||o.value&&!i.value||(w.value++,x.value.enableNotifications&&e("New Message",t.content.substring(0,50)+"..."),x.value.autoOpenOnMessage&&z()),"agent"===t.sender_type&&x.value.enableSound&&W(),setTimeout(H,100))},P=e=>{"agent"===e.sender_type&&(g.value=e.is_typing,e.is_typing&&setTimeout(()=>{g.value=!1},3e3))},L=e=>{const t=k.value.findIndex(t=>t.id===e.agent_id);"online"===e.status?-1===t?k.value.push(e.agent):k.value[t]=e.agent:"offline"===e.status&&-1!==t&&k.value.splice(t,1)},$=e=>{h.value&&h.value.id===e.id&&(h.value=r(r({},h.value),e))},F=e=>{j({id:`system_${Date.now()}`,content:e.message,type:E.SYSTEM,sender_type:"system",timestamp:new Date})},z=()=>{o.value=!0,i.value=!1,w.value=0,G(),setTimeout(H,100)},U=()=>{i.value=!0},B=()=>{i.value=!1,w.value=0,G(),setTimeout(H,100)},G=()=>c(null,null,function*(){if(!h.value)return;const e=b.value.filter(e=>!e.is_read&&"agent"===e.sender_type);if(0!==e.length)try{yield fetch(`/api/chat/conversations/${h.value.id}/mark-read`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),e.forEach(e=>{e.is_read=!0})}catch(t){}}),H=()=>{const e=document.getElementById("chat-messages-container");e&&(e.scrollTop=e.scrollHeight)},W=()=>{try{const e=new Audio("/sounds/chat-notification.mp3");e.volume=.5,e.play().catch(()=>{})}catch(e){}},Y=()=>c(null,null,function*(){try{const e=yield fetch("/api/chat/conversations",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),t=yield e.json();t.success&&(f.value=t.data)}catch(e){}}),J=u(()=>h.value&&h.value.status!==C.ENDED),q=u(()=>J.value&&n.value),K=u(()=>b.value.sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp))),X=u(()=>K.value[K.value.length-1]),V=u(()=>{var e;return(null==(e=h.value)?void 0:e.agent)||null});return p(()=>{N(),Y()}),y(()=>{_()}),{isConnected:n,isChatOpen:o,isMinimized:i,isTyping:s,agentTyping:g,connectionStatus:m,currentUser:v,activeConversation:h,conversations:f,messages:K,unreadCount:w,onlineAgents:k,chatSettings:x,connectChat:N,disconnectChat:_,startConversation:R,sendChatMessage:D,sendTypingIndicator:e=>{h.value&&(clearTimeout(I),A({type:"typing",payload:{conversation_id:h.value.id,sender_type:"user",is_typing:e}}),e?(s.value=!0,I=setTimeout(()=>{s.value=!1,A({type:"typing",payload:{conversation_id:h.value.id,sender_type:"user",is_typing:!1}})},3e3)):s.value=!1)},openChat:z,closeChat:()=>{o.value=!1},minimizeChat:U,maximizeChat:B,toggleChat:()=>{o.value?i.value?B():U():z()},endConversation:()=>c(null,null,function*(){if(h.value)try{const t=yield fetch(`/api/chat/conversations/${h.value.id}/end`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});(yield t.json()).success&&(h.value.status=C.ENDED,j({id:`system_end_${Date.now()}`,content:"Conversation ended. Thank you for contacting support!",type:E.SYSTEM,sender_type:"system",timestamp:new Date}),e("Chat Ended","Conversation has been ended. You can start a new one anytime."))}catch(t){a("Chat Error","Failed to end conversation.")}}),uploadFile:e=>c(null,null,function*(){if(!h.value)return void a("Upload Error","Please start a conversation first.");if(e.size>x.value.maxFileSize)return void a("Upload Error","File size too large. Maximum 10MB allowed.");if(!x.value.allowedFileTypes.includes(e.type))return void a("Upload Error","File type not allowed.");const t=new FormData;t.append("file",e),t.append("conversation_id",h.value.id);try{const a=yield fetch("/api/chat/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:t}),n=yield a.json();if(!n.success)throw new Error(n.message||"Upload failed");yield D(`Shared a file: ${e.name}`,e.type.startsWith("image/")?E.IMAGE:E.FILE,[n.data])}catch(n){a("Upload Error","Failed to upload file.")}}),setCurrentUser:e=>{v.value=e},loadConversationHistory:Y,hasActiveConversation:J,canSendMessages:q,lastMessage:X,agentInfo:V,CHAT_STATUS:C,MESSAGE_TYPES:E}}(),Oe=d(""),Ae=d(null);let Me=null;const Re=()=>c(null,null,function*(){const e=Oe.value.trim();e&&Ie.value&&(yield Ce(e),Oe.value="",Ee(!1))}),De=e=>c(null,null,function*(){yield Ce(e)}),je=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Re())},Pe=()=>{clearTimeout(Me),Oe.value.trim()?(Ee(!0),Me=setTimeout(()=>{Ee(!1)},3e3)):Ee(!1)},Le=e=>{const t=e.target.files[0];t&&(Se(t),e.target.value="")},$e=e=>{const t=new Date(e),a=new Date,n=Math.floor((a-t)/6e4);return n<1?"Just now":n<60?`${n}m ago`:n<1440?`${Math.floor(n/60)}h ago`:t.toLocaleDateString()};return g(()=>Oe.value,()=>{O(()=>{const e=document.querySelector("textarea");e&&(e.style.height="auto",e.style.height=Math.min(e.scrollHeight,120)+"px")})}),p(()=>{const e=JSON.parse(localStorage.getItem("user")||"null");e&&Te(e)}),(r,l)=>(v(),m("div",{class:w(["fixed bottom-4 z-50 transition-all duration-300",{"right-4":!e.isCartOpen,"right-4 sm:right-80 md:right-96":e.isCartOpen}])},[h(b,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:f(()=>[x(a)?k("",!0):(v(),m("button",{key:0,onClick:l[0]||(l[0]=(...e)=>x(be)&&x(be)(...e)),class:"relative bg-primary-600 hover:bg-primary-700 text-white rounded-full p-4 shadow-lg hover:shadow-xl transition-all duration-200 group",title:"Start Live Chat"},[l[8]||(l[8]=C("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-4.126-.98L3 21l1.98-5.874A8.955 8.955 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})],-1)),x(A)>0?(v(),m("span",R,E(x(A)>99?"99+":x(A)),1)):k("",!0),x(he).length>0?(v(),m("span",D)):k("",!0),l[9]||(l[9]=C("span",{class:"absolute inset-0 rounded-full bg-primary-600 animate-ping opacity-20"},null,-1))]))]),_:1}),h(b,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-4 scale-95"},{default:f(()=>[x(a)?(v(),m("div",{key:0,class:w(["bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",x(n)?"w-80 h-16":"w-96 h-96"])},[C("div",j,[C("div",P,[C("div",L,[x(Ne)?(v(),m("div",$,[x(Ne).avatar?(v(),m("img",{key:0,src:x(Ne).avatar,alt:x(Ne).name,class:"w-8 h-8 rounded-full object-cover"},null,8,F)):(v(),m("span",z,E(x(Ne).name.charAt(0).toUpperCase()),1))])):(v(),m("div",U,[...l[10]||(l[10]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)])])),x(t)?(v(),m("span",B)):k("",!0)]),x(n)?k("",!0):(v(),m("div",G,[C("h3",H,E(x(Ne)?x(Ne).name:"CarWise Support"),1),C("p",W,E("connected"===x(i)?"Online":"Connecting..."),1)]))]),C("div",Y,[C("button",{onClick:l[1]||(l[1]=e=>x(n)?x(xe)():x(ke)()),class:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:x(n)?"Maximize":"Minimize"},[x(n)?(v(),m("svg",q,[...l[11]||(l[11]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 17L17 7M17 7H7M17 7v10"},null,-1)])])):(v(),m("svg",K,[...l[12]||(l[12]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"},null,-1)])]))],8,J),C("button",{onClick:l[2]||(l[2]=(...e)=>x(we)&&x(we)(...e)),class:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:"Close Chat"},[...l[13]||(l[13]=[C("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),x(n)?k("",!0):(v(),m("div",X,[C("div",V,[0===x(s).length?(v(),m("div",Q,[l[17]||(l[17]=C("div",{class:"w-16 h-16 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mx-auto mb-4"},[C("svg",{class:"w-8 h-8 text-primary-600 dark:text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-4.126-.98L3 21l1.98-5.874A8.955 8.955 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"})])],-1)),l[18]||(l[18]=C("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Welcome to CarWise Support!",-1)),l[19]||(l[19]=C("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," How can we help you today? Our team is here to assist with any questions about car parts, diagnosis, or our services. ",-1)),C("div",Z,[C("button",{onClick:l[3]||(l[3]=e=>De("I need help finding car parts")),class:"block w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[...l[14]||(l[14]=[C("div",{class:"font-medium text-sm text-gray-900 dark:text-white"},"ðŸ”§ Find Car Parts",-1),C("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Get help finding the right parts for your vehicle",-1)])]),C("button",{onClick:l[4]||(l[4]=e=>De("I have questions about car diagnosis")),class:"block w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[...l[15]||(l[15]=[C("div",{class:"font-medium text-sm text-gray-900 dark:text-white"},"ðŸ” Car Diagnosis",-1),C("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Questions about our AI diagnosis service",-1)])]),C("button",{onClick:l[5]||(l[5]=e=>De("I need technical support")),class:"block w-full text-left p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[...l[16]||(l[16]=[C("div",{class:"font-medium text-sm text-gray-900 dark:text-white"},"ðŸ’» Technical Support",-1),C("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"Help with using our platform",-1)])])])])):k("",!0),(v(!0),m(S,null,T(x(s),e=>(v(),m("div",{key:e.id,class:w(["flex","user"===e.sender_type?"justify-end":"justify-start"])},[C("div",{class:w(["max-w-xs lg:max-w-md px-4 py-2 rounded-lg","user"===e.sender_type?"bg-primary-600 text-white":"system"===e.sender_type?"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-center text-sm":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700",e.temp&&"opacity-70",e.failed&&"bg-red-100 dark:bg-red-900 border-red-300 dark:border-red-700"])},[e.type===x(_e).TEXT?(v(),m("div",ee,E(e.content),1)):e.type===x(_e).IMAGE?(v(),m("div",te,[(v(!0),m(S,null,T(e.attachments,e=>(v(),m("img",{key:e.id,src:e.url,alt:e.name,class:"max-w-full h-auto rounded"},null,8,ae))),128)),e.content?(v(),m("p",ne,E(e.content),1)):k("",!0)])):e.type===x(_e).FILE?(v(),m("div",oe,[(v(!0),m(S,null,T(e.attachments,e=>(v(),m("div",{key:e.id,class:"flex items-center space-x-2 p-2 bg-gray-100 dark:bg-gray-700 rounded"},[l[20]||(l[20]=C("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),C("a",{href:e.url,download:e.name,class:"text-sm hover:underline"},E(e.name),9,ie)]))),128)),e.content?(v(),m("p",se,E(e.content),1)):k("",!0)])):k("",!0),C("div",{class:w(["text-xs mt-1 opacity-70","user"===e.sender_type?"text-right":"text-left"])},[I(E($e(e.timestamp))+" ",1),e.temp?(v(),m("span",re,"â³")):k("",!0),e.failed?(v(),m("span",le,"âŒ")):k("",!0)],2)],2)],2))),128)),x(o)?(v(),m("div",ce,[...l[21]||(l[21]=[C("div",{class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg px-4 py-2"},[C("div",{class:"flex space-x-1"},[C("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),C("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.1s"}}),C("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0.2s"}})])],-1)])])):k("",!0)]),C("div",de,[C("div",ue,[C("button",{onClick:l[6]||(l[6]=e=>r.$refs.fileInput.click()),class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Attach File"},[...l[22]||(l[22]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)])]),C("div",pe,[N(C("textarea",{"onUpdate:modelValue":l[7]||(l[7]=e=>Oe.value=e),onKeydown:je,onInput:Pe,placeholder:"Type your message...",rows:"1",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",disabled:!x(Ie)},null,40,ye),[[_,Oe.value]])]),C("button",{onClick:Re,disabled:!x(Ie)||!Oe.value.trim(),class:"p-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Send Message"},[...l[23]||(l[23]=[C("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,ge)]),"connected"!==x(i)?(v(),m("div",me,[C("span",{class:w("connecting"===x(i)?"text-yellow-600":"text-red-600")},E("connecting"===x(i)?"Connecting...":"Connection lost. Trying to reconnect..."),3)])):k("",!0)])])),C("input",{ref_key:"fileInput",ref:Ae,type:"file",class:"hidden",onChange:Le,accept:x(fe).allowedFileTypes.join(",")},null,40,ve)],2)):k("",!0)]),_:1})],2))}},[["__scopeId","data-v-56c76d85"]]);export{he as L,M as u};
