var e=(e,r,o)=>new Promise((a,s)=>{var t=e=>{try{n(o.next(e))}catch(r){s(r)}},l=e=>{try{n(o.throw(e))}catch(r){s(r)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(t,l);n((o=o.apply(e,r)).next())});import{b as r,i as o,f as a,g as s,t,z as l,m as n,u as d,x as i,E as c,r as u,o as m,C as p}from"./vendor-DY_W8Gir.js";import{a as y}from"./api-Czr0-LeR.js";import{t as w}from"./translations-CMR8tjFW.js";import{_ as x}from"./app-CHHlXeKT.js";import"./utils-D0uvFI5R.js";const v={class:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-secondary-900 dark:to-secondary-800"},f={class:"bg-white/80 dark:bg-secondary-800/80 backdrop-blur-md border-b border-secondary-200 dark:border-secondary-700"},h={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},b={class:"flex items-center justify-between"},k={class:"flex items-center space-x-4"},g={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},_={class:"bg-white/80 dark:bg-secondary-800/80 backdrop-blur-md rounded-2xl p-8 border border-white/20 dark:border-secondary-700/20"},C={key:0,class:"mb-6 p-4 bg-success-50 dark:bg-success-900/20 border border-success-200 dark:border-success-700 rounded-lg"},M={class:"flex"},P={class:"text-success-800 dark:text-success-200"},j={key:1,class:"mb-6 p-4 bg-danger-50 dark:bg-danger-900/20 border border-danger-200 dark:border-danger-700 rounded-lg"},B={class:"flex"},U={class:"text-danger-800 dark:text-danger-200"},z={class:"space-y-6"},N={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},V={class:"sm:col-span-2"},L={key:0,class:"space-y-6"},E={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},S={for:"hourly_rate",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"},I={class:"sm:col-span-2"},A={class:"space-y-6"},H={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},F={class:"relative"},q=["type"],O={key:0,class:"h-5 w-5 text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J={key:1,class:"h-5 w-5 text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T={class:"relative"},Y=["type"],D={key:0,class:"h-5 w-5 text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},R={key:1,class:"h-5 w-5 text-secondary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},G={class:"flex items-center justify-end space-x-4 pt-6 border-t border-secondary-200 dark:border-secondary-700"},K=["disabled"],Q={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},W=x({name:"ProfileEdit",setup(){const r=p(),o=u(null),a=u(!1),s=u(""),t=u(""),l=u(!1),n=u(!1),d=u({first_name:"",last_name:"",email:"",phone:"",location:"",experience_years:"",hourly_rate:"",bio:"",new_password:"",new_password_confirmation:""});return m(()=>{const a=localStorage.getItem("token"),t=localStorage.getItem("user");a&&t?(o.value=JSON.parse(t),e(null,null,function*(){try{const e=yield y.getUser();e.data.success&&(o.value=e.data.user,d.value.first_name=o.value.first_name||"",d.value.last_name=o.value.last_name||"",d.value.email=o.value.email||"",d.value.phone=o.value.phone||"",d.value.location=o.value.location||"",d.value.experience_years=o.value.experience_years||"",d.value.hourly_rate=o.value.hourly_rate||"",d.value.bio=o.value.bio||"")}catch(e){s.value="Failed to load user data"}})):r.push("/login")}),{user:o,form:d,isLoading:a,errorMessage:s,successMessage:t,showNewPassword:l,showConfirmPassword:n,handleSubmit:()=>e(null,null,function*(){var e,l,n;a.value=!0,s.value="",t.value="";try{if(d.value.new_password&&d.value.new_password!==d.value.new_password_confirmation)return void(s.value="New passwords do not match");const a={first_name:d.value.first_name,last_name:d.value.last_name,email:d.value.email,phone:d.value.phone,location:d.value.location};d.value.new_password&&(a.password=d.value.new_password,a.password_confirmation=d.value.new_password_confirmation),"mechanic"===(null==(e=o.value)?void 0:e.role)&&(a.experience_years=d.value.experience_years?parseInt(d.value.experience_years):null,a.hourly_rate=d.value.hourly_rate?parseFloat(d.value.hourly_rate):null,a.bio=d.value.bio);const l=yield y.updateProfile(a);l.data.success&&(localStorage.setItem("user",JSON.stringify(l.data.user)),t.value="Profile updated successfully!",setTimeout(()=>{r.push("/dashboard")},1500))}catch(i){s.value=(null==(n=null==(l=i.response)?void 0:l.data)?void 0:n.message)||"Failed to update profile"}finally{a.value=!1}}),goBack:()=>{r.push("/dashboard")},t:w}}},[["render",function(e,u,m,p,y,w){var x,W;return o(),r("div",v,[a("div",f,[a("div",h,[a("div",b,[a("div",k,[a("button",{onClick:u[0]||(u[0]=(...e)=>p.goBack&&p.goBack(...e)),class:"p-2 text-secondary-600 dark:text-secondary-400 hover:text-secondary-900 dark:hover:text-white transition-colors duration-200"},[...u[15]||(u[15]=[a("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),u[16]||(u[16]=a("div",null,[a("h1",{class:"text-2xl font-bold text-secondary-900 dark:text-white"},"Edit Profile"),a("p",{class:"text-secondary-600 dark:text-secondary-400"},"Update your personal information")],-1))])])])]),a("div",g,[a("div",_,[p.successMessage?(o(),r("div",C,[a("div",M,[u[17]||(u[17]=a("svg",{class:"w-5 h-5 text-success-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),a("p",P,t(p.successMessage),1)])])):s("",!0),p.errorMessage?(o(),r("div",j,[a("div",B,[u[18]||(u[18]=a("svg",{class:"w-5 h-5 text-danger-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),a("p",U,t(p.errorMessage),1)])])):s("",!0),a("form",{onSubmit:u[14]||(u[14]=l((...e)=>p.handleSubmit&&p.handleSubmit(...e),["prevent"])),class:"space-y-8"},[a("div",z,[u[24]||(u[24]=a("div",{class:"border-b border-secondary-200 dark:border-secondary-700 pb-4"},[a("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white flex items-center"},[a("svg",{class:"w-5 h-5 mr-2 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),n(" Personal Information ")])],-1)),a("div",N,[a("div",null,[u[19]||(u[19]=a("label",{for:"first_name",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," First Name * ",-1)),d(a("input",{id:"first_name","onUpdate:modelValue":u[1]||(u[1]=e=>p.form.first_name=e),type:"text",required:"",class:"input",placeholder:"Enter your first name"},null,512),[[i,p.form.first_name]])]),a("div",null,[u[20]||(u[20]=a("label",{for:"last_name",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Last Name * ",-1)),d(a("input",{id:"last_name","onUpdate:modelValue":u[2]||(u[2]=e=>p.form.last_name=e),type:"text",required:"",class:"input",placeholder:"Enter your last name"},null,512),[[i,p.form.last_name]])]),a("div",null,[u[21]||(u[21]=a("label",{for:"email",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Email Address * ",-1)),d(a("input",{id:"email","onUpdate:modelValue":u[3]||(u[3]=e=>p.form.email=e),type:"email",required:"",class:"input",placeholder:"Enter your email"},null,512),[[i,p.form.email]])]),a("div",null,[u[22]||(u[22]=a("label",{for:"phone",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Phone Number ",-1)),d(a("input",{id:"phone","onUpdate:modelValue":u[4]||(u[4]=e=>p.form.phone=e),type:"tel",class:"input",placeholder:"Enter your phone number"},null,512),[[i,p.form.phone]])]),a("div",V,[u[23]||(u[23]=a("label",{for:"location",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Location ",-1)),d(a("input",{id:"location","onUpdate:modelValue":u[5]||(u[5]=e=>p.form.location=e),type:"text",class:"input",placeholder:"Enter your location (city, country)"},null,512),[[i,p.form.location]])])])]),"mechanic"===(null==(x=p.user)?void 0:x.role)?(o(),r("div",L,[u[27]||(u[27]=a("div",{class:"border-b border-secondary-200 dark:border-secondary-700 pb-4"},[a("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white flex items-center"},[a("svg",{class:"w-5 h-5 mr-2 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})]),n(" Professional Information ")])],-1)),a("div",E,[a("div",null,[u[25]||(u[25]=a("label",{for:"experience_years",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Years of Experience ",-1)),d(a("input",{id:"experience_years","onUpdate:modelValue":u[6]||(u[6]=e=>p.form.experience_years=e),type:"number",min:"0",max:"50",class:"input",placeholder:"Years of experience"},null,512),[[i,p.form.experience_years]])]),a("div",null,[a("label",S," Hourly Rate ("+t((null==(W=p.user)?void 0:W.currency_code)||"USD")+") ",1),d(a("input",{id:"hourly_rate","onUpdate:modelValue":u[7]||(u[7]=e=>p.form.hourly_rate=e),type:"number",step:"0.01",min:"0",class:"input",placeholder:"Hourly rate"},null,512),[[i,p.form.hourly_rate]])]),a("div",I,[u[26]||(u[26]=a("label",{for:"bio",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Bio ",-1)),d(a("textarea",{id:"bio","onUpdate:modelValue":u[8]||(u[8]=e=>p.form.bio=e),rows:"4",class:"input",placeholder:"Tell us about your experience and expertise..."},null,512),[[i,p.form.bio]])])])])):s("",!0),a("div",A,[u[34]||(u[34]=a("div",{class:"border-b border-secondary-200 dark:border-secondary-700 pb-4"},[a("h3",{class:"text-lg font-semibold text-secondary-900 dark:text-white flex items-center"},[a("svg",{class:"w-5 h-5 mr-2 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),n(" Change Password (Optional) ")])],-1)),a("div",H,[a("div",null,[u[30]||(u[30]=a("label",{for:"new_password",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," New Password ",-1)),a("div",F,[d(a("input",{id:"new_password","onUpdate:modelValue":u[9]||(u[9]=e=>p.form.new_password=e),type:p.showNewPassword?"text":"password",class:"input pr-10",placeholder:"Enter new password"},null,8,q),[[c,p.form.new_password]]),a("button",{type:"button",onClick:u[10]||(u[10]=e=>p.showNewPassword=!p.showNewPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p.showNewPassword?(o(),r("svg",O,[...u[28]||(u[28]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)])])):(o(),r("svg",J,[...u[29]||(u[29]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])]),a("div",null,[u[33]||(u[33]=a("label",{for:"new_password_confirmation",class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Confirm New Password ",-1)),a("div",T,[d(a("input",{id:"new_password_confirmation","onUpdate:modelValue":u[11]||(u[11]=e=>p.form.new_password_confirmation=e),type:p.showConfirmPassword?"text":"password",class:"input pr-10",placeholder:"Confirm new password"},null,8,Y),[[c,p.form.new_password_confirmation]]),a("button",{type:"button",onClick:u[12]||(u[12]=e=>p.showConfirmPassword=!p.showConfirmPassword),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[p.showConfirmPassword?(o(),r("svg",D,[...u[31]||(u[31]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)])])):(o(),r("svg",R,[...u[32]||(u[32]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))])])])])]),a("div",G,[a("button",{type:"button",onClick:u[13]||(u[13]=(...e)=>p.goBack&&p.goBack(...e)),class:"btn-outline"}," Cancel "),a("button",{type:"submit",disabled:p.isLoading,class:"btn-primary"},[p.isLoading?(o(),r("svg",Q,[...u[35]||(u[35]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):s("",!0),n(" "+t(p.isLoading?"Updating...":"Update Profile"),1)],8,K)])],32)])])])}]]);export{W as default};
