import{a as e}from"./utils-BruBI8_W.js";const t=e.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});t.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e,e=>{var t,a,s,r;if(window.$notify&&(null==(t=e.response)?void 0:t.status)>=400){const t=(null==(s=null==(a=e.response)?void 0:a.data)?void 0:s.message)||"An error occurred";window.$notify.error("Error",t)}return 401===(null==(r=e.response)?void 0:r.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.$notify&&window.$notify.warning("Session Expired","Please log in again"),window.location.href="/login"),Promise.reject(e)});const a={register:e=>t.post("/register",e),login:e=>t.post("/login",e),logout:()=>t.post("/logout"),getUser:()=>t.get("/user"),updateProfile:e=>t.put("/user/profile",e)},s={getAll:()=>t.get("/cars"),getById:e=>t.get(`/cars/${e}`),create:e=>t.post("/cars",e),update:(e,a)=>t.put(`/cars/${e}`,a),delete:e=>t.delete(`/cars/${e}`),statistics:()=>t.get("/cars/statistics")},r={startDiagnosis:e=>t.post("/diagnosis/start",e),submitDiagnosis:e=>t.post("/diagnosis/submit",e,{headers:{"Content-Type":"multipart/form-data"}}),getResult:e=>t.get(`/diagnosis/result/${e}?t=${Date.now()}&_=${Math.random()}`,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","If-None-Match":"*"}}),getHistory:(e={})=>t.get("/diagnosis/history",{params:e}),getCarDiagnosisHistory:(e,a={})=>t.get(`/diagnosis/car/${e}/history`,{params:a}),transcribeAudio:e=>t.post("/transcribe-audio",e,{headers:{"Content-Type":"multipart/form-data"}})},o={getStatistics:()=>t.get("/dashboard/statistics"),getNotifications:()=>t.get("/dashboard/notifications")},i={getPrimaryImage:(e,a,s=null,r=null)=>{const o={brand:e,model:a};return s&&(o.year=s),r&&(o.color=r),t.get("/car-images/primary",{params:o})},getCarImages:(e,a,s=null,r=null)=>{const o={brand:e,model:a};return s&&(o.year=s),r&&(o.color=r),t.get("/car-images/car",{params:o})},getBrandFallback:e=>t.get("/car-images/brand-fallback",{params:{brand:e}}),getDefaultImage:()=>t.get("/car-images/default")};export{a,i as b,s as c,r as d,t as e,o as f};
