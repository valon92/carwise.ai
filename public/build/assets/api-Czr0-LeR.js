import{a as e}from"./utils-D0uvFI5R.js";const t=e.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"}});t.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e,e=>{var t,s,o,a;if(window.$notify&&(null==(t=e.response)?void 0:t.status)>=400){const t=(null==(o=null==(s=e.response)?void 0:s.data)?void 0:o.message)||"An error occurred";window.$notify.error("Error",t)}return 401===(null==(a=e.response)?void 0:a.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.$notify&&window.$notify.warning("Session Expired","Please log in again"),window.location.href="/login"),Promise.reject(e)});const s={register:e=>t.post("/register",e),login:e=>t.post("/login",e),logout:()=>t.post("/logout"),getUser:()=>t.get("/user"),updateProfile:e=>t.put("/user/profile",e)},o={getAll:()=>t.get("/cars"),getById:e=>t.get(`/cars/${e}`),create:e=>t.post("/cars",e),update:(e,s)=>t.put(`/cars/${e}`,s),delete:e=>t.delete(`/cars/${e}`),statistics:()=>t.get("/cars/statistics")},a={startDiagnosis:e=>t.post("/diagnosis/start",e),submitDiagnosis:e=>t.post("/diagnosis/submit",e,{headers:{"Content-Type":"multipart/form-data"}}),getResult:e=>t.get(`/diagnosis/result/${e}?t=${Date.now()}&_=${Math.random()}`,{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","If-None-Match":"*"}}),getHistory:(e={})=>t.get("/diagnosis/history",{params:e})},r={getStatistics:()=>t.get("/dashboard/statistics"),getNotifications:()=>t.get("/dashboard/notifications")},i={getAll:(e={})=>t.get("/mechanics",{params:e}),getById:e=>t.get(`/mechanics/${e}`),create:e=>t.post("/mechanics",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,s)=>t.post(`/mechanics/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})};export{s as a,r as b,o as c,a as d,t as e,i as m};
